{"version":3,"sources":["views/sandbox/news-manage/News.module.css","views/login/Login.js","views/news/Detail.js","views/news/News.js","components/sandbox/SideMenu.js","components/sandbox/TopHeader.js","views/sandbox/home/Home.js","views/sandbox/nopermission/NoPermission.js","views/sandbox/right-manage/RightList.js","views/sandbox/right-manage/RoleList.js","components/user-manage/UserForm.js","views/sandbox/user-manage/UserList.js","components/news-manage/NewEditor.js","views/sandbox/news-manage/NewsAdd.js","views/sandbox/news-manage/NewsDraft.js","views/sandbox/news-manage/NewsCategory.js","components/publish-manage/NewsPublish.js","components/publish-manage/usePublish.js","views/sandbox/news-manage/NewsUpdate.js","components/sandbox/NewsRouter.js","views/sandbox/news-manage/NewsPreview.js","views/sandbox/audit-manage/Audit.js","views/sandbox/audit-manage/AuditList.js","views/sandbox/publish-manage/Unpublished.js","views/sandbox/publish-manage/Published.js","views/sandbox/publish-manage/Sunset.js","views/sandbox/NewSandBox.js","router/IndexRouter.js","redux/store.js","redux/reducers/CollapsedReducer.js","redux/reducers/LoadingReducer.js","App.js","util/http.js","index.js"],"names":["module","exports","Login","props","style","background","height","className","name","onFinish","values","console","log","axios","get","username","password","then","res","data","length","message","error","localStorage","setItem","JSON","stringify","history","push","Item","rules","required","prefix","UserOutlined","placeholder","LockOutlined","type","htmlType","href","Detail","useState","newsInfo","setNewsInfo","useEffect","match","params","id","view","patch","onBack","window","back","title","subTitle","category","HeartTwoTone","twoToneColor","onClick","star","size","column","label","author","publishTime","moment","format","region","dangerouslySetInnerHTML","__html","content","margin","border","News","list","setList","Object","entries","_","groupBy","item","width","gutter","map","span","bordered","hoverable","pagination","pageSize","dataSource","renderItem","Sider","Layout","SubMenu","Menu","iconList","UserAddOutlined","connect","isCollapsed","CollApsedReducer","withRouter","menu","setMenu","parse","getItem","role","rights","checkPermisson","pagepermisson","checked","includes","key","selectKeys","location","pathname","openKeys","split","trigger","collapsible","collapsed","display","flex","theme","mode","selectedKeys","defaultOpenKeys","renderMenu","menuList","children","icon","Header","changeCollapsed","roleName","danger","removeItem","replace","padding","MenuUnfoldOutlined","MenuFoldOutlined","float","color","overlay","Meta","Card","NoPermission","Component","confirm","Modal","Option","Select","UserForm","forwardRef","ref","isDisabled","setIsDisabled","isUpdateDisabled","roleId","roleObj","chekRegionDisabled","isUpdate","value","chekRoleDisabled","disabled","regionList","onChange","current","setFieldsValue","roleList","NewEditor","html","undefined","contentBlock","htmlToDraft","contentState","ContentState","createFromBlockArray","contentBlocks","editorState","EditorState","createWithContent","setEditorState","onEditorStateChange","onBlur","getContent","draftToHtml","convertToRaw","getCurrentContent","Step","Steps","EditableContext","React","createContext","NewsPublish","columns","dataIndex","render","button","rowKey","usePulish","setDataSource","handleDelete","filter","delete","notification","info","description","placement","handlePublish","Date","now","handleSunset","LocalRouterMap","viewList","setViewList","starList","setStarList","allList","setAllList","visible","setVisible","pieChart","setPieChart","barRef","useRef","pieRef","renderBarView","onresize","obj","myChart","Echarts","option","text","tooltip","legend","xAxis","keys","axisLabel","rotate","interval","yAxis","minInterval","series","setOption","resize","cover","alt","src","actions","SettingOutlined","setTimeout","currentList","gruopObj","i","left","orient","radius","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","renderPieView","EditOutlined","EllipsisOutlined","avatar","paddingLeft","closable","onClose","marginTop","setdataSource","isAddVisible","setIsAddVisible","isUpdateVisible","setIsUpdateVisible","setRoleList","setRegionList","setcurrent","setIsUpdateDisabled","addForm","updateForm","filters","onFilter","roleState","default","handleChange","shape","DeleteOutlined","confirmMethod","handleUpdate","ExclamationCircleOutlined","onOk","deleteMethod","onCancel","okText","cancelText","validateFields","resetFields","post","catch","err","rightList","setRightList","currentRights","setCurrentRights","currentId","setCurrentId","isModalVisible","setisModalVisible","checkable","checkedKeys","defaultSelectedKeys","onCheck","checkKeys","checkStrictly","treeData","forEach","textAlign","switchMethod","grade","rightId","setCurrent","categoryList","setCategoryList","formInfo","setFormInfo","setContent","user","NewsForm","handleSave","auditState","active","labelCol","wrapperCol","trim","UploadOutlined","record","onCell","editable","components","body","row","index","Form","useForm","form","component","Provider","cell","restProps","editing","setEditing","inputRef","useContext","focus","toggleEdit","save","a","childNode","onPressEnter","paddingRight","colorList","createTime","publishState","categoryId","goBack","handleAudit","handlrRevert","isLoading","LoadingReducer","backRouteList","setBackRouteList","Promise","all","spinning","routepermisson","checkRoute","checkUserPermission","path","exact","from","to","Content","NewSandBox","NProgress","start","done","minHeight","IndexRouter","persistConfig","storage","blacklist","reducer","combineReducers","prevState","action","newState","payload","persistedReducer","persistReducer","store","createStore","persistor","persistStore","App","loading","defaults","baseURL","interceptors","request","use","config","dispatch","reject","response","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.e60f823d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"active\":\"News_active__11Z-5\"};","import React from 'react'\r\nimport {Form,Button,Input, message} from 'antd'\r\nimport {UserOutlined,LockOutlined} from '@ant-design/icons'\r\nimport axios from 'axios'\r\nimport './Login.css'\r\n\r\nexport default function Login(props) {\r\n  const onFinish = (values)=>{\r\n    console.log(values)\r\n    axios.get(`/users?username=${values.username}&password=${values.password}&roleState=true&_expand=role`).then(\r\n      res=>{\r\n        console.log(res.data)\r\n        if(res.data.length===0){\r\n          message.error(\"用户名或密码不匹配\")\r\n        }else{\r\n          localStorage.setItem(\"token\",JSON.stringify(res.data[0]))\r\n          props.history.push(\"/\")\r\n        }\r\n      }\r\n    )\r\n  }\r\n  return (\r\n    <div style={{ background: 'rgb(35,39,65)', height: \"100%\" }}>\r\n      <div className=\"formContainer\">\r\n        <div className=\"loginTitle\">全球新闻发布管理系统</div>\r\n        <Form\r\n          name=\"normal_login\"\r\n          className=\"login-form\"\r\n          onFinish={onFinish}\r\n        >\r\n          <Form.Item\r\n            name=\"username\"\r\n            rules={[{ required: true, message: 'Please input your Username!' }]}\r\n          >\r\n            <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"password\"\r\n            rules={[{ required: true, message: 'Please input your Password!' }]}\r\n          >\r\n            <Input\r\n              prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n            />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n              登录\r\n            </Button>\r\n            Or <a href=\"www.baidu.com\">register now!</a>\r\n          </Form.Item>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React,{ useEffect, useState } from 'react'\r\nimport { PageHeader, Descriptions } from 'antd'\r\nimport moment from 'moment'\r\nimport axios from 'axios'\r\nimport {HeartTwoTone} from '@ant-design/icons'\r\n\r\nexport default function Detail(props) {\r\n  const [newsInfo, setNewsInfo] = useState(null)\r\n\r\n  useEffect(() => {\r\n    axios.get(`/news/${props.match.params.id}?_expand=category&_expand=role`).then(res=>{\r\n      setNewsInfo({\r\n        ...res.data,\r\n        view:res.data.view+1\r\n      })\r\n      return res.data\r\n    }).then(res=>{\r\n      axios.patch(`/news/${props.match.params.id}`,{\r\n        view:res.view+1\r\n      })\r\n    })\r\n  }, [props.match.params.id])\r\n\r\n  const handleStar = ()=>{\r\n    setNewsInfo({\r\n      ...newsInfo,\r\n      star:newsInfo.star+1\r\n    })\r\n    axios.patch(`/news/${props.match.params.id}`,{\r\n      star:newsInfo.star+1\r\n    })\r\n  }\r\n  return (\r\n    <div>\r\n      {\r\n        newsInfo&& <div>\r\n          <PageHeader\r\n            onBack={() => window.history.back()}\r\n            title={newsInfo?.title}\r\n            subTitle={<div>\r\n              {newsInfo.category.title} \r\n              <HeartTwoTone twoToneColor=\"#eb2f96\" onClick={()=>handleStar()}/></div> }\r\n          >\r\n            <Descriptions size=\"small\" column={3}>\r\n              {/* 第一行 */}\r\n              <Descriptions.Item label=\"创建者\">{newsInfo.author}</Descriptions.Item>\r\n              <Descriptions.Item label=\"发布时间\">{\r\n                newsInfo.publishTime?moment(newsInfo.publishTime).format(\"YYYY/MM/DD HH:mm:ss\"):\"-\"\r\n              }</Descriptions.Item>\r\n              {/* 第二行 */}\r\n              <Descriptions.Item label=\"区域\">{newsInfo.region}</Descriptions.Item>\r\n              {/* 第三行 */}\r\n              <Descriptions.Item label=\"访问数量\">{newsInfo.view}</Descriptions.Item>\r\n              <Descriptions.Item label=\"点赞数量\">{newsInfo.star}</Descriptions.Item>\r\n              <Descriptions.Item label=\"评论数量\">0</Descriptions.Item>\r\n            </Descriptions>\r\n          </PageHeader>\r\n\r\n          <div dangerouslySetInnerHTML={{\r\n            __html:newsInfo.content\r\n          }}style={{\r\n            margin:\"0 24px\",\r\n            border:\"1px solid black\"\r\n          }}>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n","import axios from 'axios'\r\nimport React,{ useEffect, useState} from 'react'\r\nimport {PageHeader, Card, Col, Row, List} from 'antd'\r\nimport _ from 'lodash'\r\nexport default function News() {\r\n  const [list, setList] = useState([])\r\n  useEffect(() => {\r\n    axios.get(\"/news?publishState=2&_expand=category\").then(res=>{\r\n      //对分好类的数据转换成二维数组\r\n      setList(Object.entries(_.groupBy(res.data,item=>item.category.title)))\r\n      console.log(list)\r\n    })\r\n  }, [list])\r\n  return (\r\n    <div style={{\r\n      width:\"95%\",\r\n      margin:\"0 auto\"\r\n    }}>\r\n      <PageHeader\r\n        className=\"site-page-header\"\r\n        title=\"全球大新闻\"\r\n        subTitle=\"查看新闻\"\r\n      />\r\n      <div className=\"site-card-wrapper\">\r\n        <Row gutter={[16,16]}>\r\n          {\r\n            list.map(item=>\r\n              <Col span={8} key={item[0]}>\r\n                <Card title={item[0]} bordered={true} \r\n                hoverable={true}>\r\n                  <List\r\n                    size=\"small\"\r\n                    pagination={{\r\n                      pageSize:3\r\n                    }}\r\n                    dataSource={item[1]}\r\n                    renderItem={data => <List.Item><a href={`#/detail/${data.id}`}>{data.title}</a></List.Item>}\r\n                  />\r\n                </Card>\r\n              </Col>\r\n          )\r\n          }\r\n        </Row>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React,{useEffect, useState} from 'react'\r\nimport {Layout,Menu} from 'antd'\r\nimport './index.css'\r\nimport {withRouter} from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport {\r\n  UserOutlined,\r\n  UserAddOutlined\r\n} from '@ant-design/icons';\r\nimport { connect } from 'react-redux'\r\n\r\nconst { Sider } = Layout;\r\nconst {SubMenu} = Menu\r\n\r\n//模拟数组结构\r\n// const menuList = [\r\n//   {\r\n//     key:\"/home\",\r\n//     title:\"首页\",\r\n//     icon:<UserOutlined/>\r\n//   },\r\n//   {\r\n//     key:\"/user-manage\",\r\n//     title:\"用户管理\",\r\n//     icon:<UserOutlined/>,\r\n//     children:[\r\n//       {\r\n//         key:\"/user-manage/list\",\r\n//         title:\"用户列表\",\r\n//         icon:<UserOutlined/>\r\n//       }\r\n//     ]\r\n//   },\r\n//   {\r\n//     key:\"/right-manage\",\r\n//     title:\"权限管理\",\r\n//     icon:<UserOutlined/>,\r\n//     children:[\r\n//       {\r\n//         key:\"/right-manage/role/list\",\r\n//         title:\"角色列表\",\r\n//         icon:<UserOutlined/>\r\n//       },\r\n//       {\r\n//         key:\"/right-manage/right/list\",\r\n//         title:\"权限列表\",\r\n//         icon:<UserOutlined/>\r\n//       }\r\n//     ]\r\n//   }\r\n// ]\r\nconst iconList = {\r\n  \"/home\":<UserOutlined/>,\r\n  \"/user-manage/list\":<UserAddOutlined/>,\r\n  \"/right-manage/role/list\":<UserOutlined/>,\r\n  \"/right-manage/right/list\":<UserOutlined/>\r\n}\r\n\r\nfunction SideMenu(props) {\r\n\r\n  const [menu,setMenu] = useState([])\r\n\r\n  useEffect(() => {\r\n    axios.get(\"/rights?_embed=children\").then(res=>{\r\n      setMenu(res.data);\r\n    })\r\n  },[])\r\n\r\n  const {role:{rights,id}} = JSON.parse(localStorage.getItem(\"token\"))\r\n  const checkPermisson = (item)=>{\r\n    return item.pagepermisson && (id===1?rights.checked.includes(item.key)\r\n    :rights.includes(item.key))\r\n  }\r\n\r\n  const renderMenu = (menuList) =>{\r\n    return menuList.map(item=>{\r\n      if(item.children?.length>0 && checkPermisson(item)){\r\n        return <SubMenu key={item.key} icon={iconList[item.key]} title={item.title}>\r\n          {renderMenu(item.children)}\r\n        </SubMenu>\r\n      }\r\n      return checkPermisson(item) && <Menu.Item key={item.key} icon={iconList[item.key]} onClick={()=>{\r\n        props.history.push(item.key)\r\n      }}>{item.title}</Menu.Item>\r\n    })\r\n  }\r\n  const selectKeys = props.location.pathname;\r\n  const openKeys = [\"/\"+props.location.pathname.split(\"/\")[1]];\r\n\r\n  return (\r\n    <Sider trigger={null} collapsible collapsed={props.isCollapsed} >\r\n      <div style={{display:\"flex\",height:\"100%\",\"flexDirection\":\"column\"}}>\r\n        <div className=\"logo\" >全球新闻发布管理系统</div>\r\n        <div style={{flex:1,\"overflow\":\"auto\"}}>\r\n          <Menu theme=\"dark\" mode=\"inline\" selectedKeys={selectKeys} className=\"aaaaa\" defaultOpenKeys={openKeys}>\r\n            {renderMenu(menu)}\r\n          </Menu>\r\n        </div>\r\n      </div>\r\n    </Sider>\r\n  )\r\n}\r\nconst mapStateToProps = ({CollApsedReducer:{isCollapsed}})=>{\r\n  return {\r\n    isCollapsed\r\n  }\r\n  \r\n}\r\nexport default connect(mapStateToProps)(withRouter(SideMenu))","import React from 'react'\r\nimport { Layout,Menu,Dropdown,Avatar } from 'antd'\r\nimport {withRouter} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\nimport {\r\n  MenuUnfoldOutlined,\r\n  MenuFoldOutlined,\r\n  UserOutlined\r\n} from '@ant-design/icons';\r\nconst { Header } = Layout;\r\n\r\nfunction TopHeader(props){\r\n    // console.log(props)\r\n    // const [collapsed,setCollapsed] = useState(false);\r\n    const changeCollapsed = ()=>{\r\n      //改变state的isCollapsed\r\n      // console.log(props)\r\n      props.changeCollapsed()\r\n    }\r\n    const {role:{roleName},username} = JSON.parse(localStorage.getItem(\"token\"))\r\n    const menu = (\r\n      <Menu>\r\n        <Menu.Item>\r\n          {roleName}\r\n        </Menu.Item>\r\n        <Menu.Item danger onClick={()=>{\r\n          localStorage.removeItem(\"token\")\r\n          props.history.replace(\"/login\")\r\n        }}>退出</Menu.Item>\r\n      </Menu>\r\n    );\r\n\r\n    return (\r\n      <Header className=\"site-layout-background\" style={{ padding: '0 16px' }}>\r\n        {\r\n          props.isCollapsed ? <MenuUnfoldOutlined onClick={changeCollapsed}/> \r\n          : <MenuFoldOutlined onClick={changeCollapsed}/>\r\n        }\r\n\r\n        <div style={{float:\"right\"}}>\r\n          <span>欢迎<span style={{color:\"#1890ff\"}}> {username}</span>回来</span>\r\n          <Dropdown overlay={menu}>\r\n            <Avatar size=\"large\" icon={<UserOutlined />} />\r\n          </Dropdown>\r\n        </div>\r\n      </Header>\r\n    )\r\n}\r\n/*\r\n  connect(\r\n    //mapStateToProps\r\n    //mapDispatchToProps\r\n  )(被包装的组件)\r\n*/\r\nconst mapStateToProps = ({CollApsedReducer:{isCollapsed}})=>{\r\n  return {\r\n    isCollapsed\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  changeCollapsed(){\r\n    return {\r\n      type:\"change_collapsed\"\r\n      // payload:\r\n    }//action\r\n  }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withRouter(TopHeader))","import React, { useEffect, useRef, useState} from 'react'\r\nimport { Card, Col, Row, List, Avatar, Drawer} from 'antd';\r\nimport { EditOutlined, EllipsisOutlined, SettingOutlined } from '@ant-design/icons';\r\nimport * as Echarts from 'echarts'\r\nimport _ from 'lodash'\r\nimport axios from 'axios'\r\n\r\nconst { Meta } = Card;\r\nexport default function Home () {\r\n    const [viewList, setViewList] = useState([])\r\n    const [starList, setStarList] = useState([])\r\n    const [allList, setAllList] = useState([])\r\n    const [visible, setVisible] = useState(false)\r\n    const [pieChart, setPieChart] = useState(null)\r\n    const barRef = useRef()\r\n    const pieRef = useRef()\r\n    //浏览最多的数据\r\n    useEffect(() => {\r\n      axios.get(`/news?publishState=2&_expand=category&_sort=view&_order=desc&limit=6`).then(res=>{\r\n        setViewList(res.data)\r\n      })\r\n    }, [])\r\n    //点赞最多的数据\r\n    useEffect(() => {\r\n      axios.get(`/news?publishState=2&_expand=category&_sort=star&_order=desc&limit=6`).then(res=>{\r\n        setStarList(res.data)\r\n      })\r\n    }, [])\r\n\r\n\r\n    //获取按照新闻类型分类的数据\r\n    useEffect(() => {\r\n      axios.get(`/news?publishState=2&_expand=category`).then(res=>{\r\n        setAllList(res.data)\r\n        renderBarView(_.groupBy(res.data,item=>item.category.title))\r\n      })\r\n      //组件销毁的时候,清空resize事件\r\n      return ()=>{\r\n        window.onresize = null\r\n      }\r\n    }, [])\r\n    //根据数据渲染柱状图\r\n    const renderBarView=(obj)=>{\r\n\r\n      var myChart = Echarts.init(barRef.current);\r\n\r\n        // 指定图表的配置项和数据\r\n        var option = {\r\n            title: {\r\n                text: 'ECharts 入门示例'\r\n            },\r\n            tooltip: {},\r\n            legend: {\r\n                data:['数量']\r\n            },\r\n            xAxis: {\r\n                data: Object.keys(obj),\r\n                axisLabel:{\r\n                  rotate:\"60\", //X轴标题旋转\r\n                  interval:0  //始终显示完全标题  \r\n                }\r\n            },\r\n            yAxis: {\r\n              minInterval:1\r\n            },\r\n            series: [{\r\n                name: '数量',\r\n                type: 'bar',\r\n                data: Object.values(obj).map(item=>item.length)\r\n            }]\r\n        };\r\n\r\n        // 使用刚指定的配置项和数据显示图表。\r\n        myChart.setOption(option);\r\n        window.onresize = () =>{\r\n          myChart.resize()\r\n        }\r\n    }\r\n\r\n    const renderPieView = (obj)=>{\r\n      //数据处理工作\r\n      var currentList = allList.filter(item=>item.author===username)\r\n      var gruopObj = _.groupBy(currentList,item=>item.category.title)\r\n      var list = []\r\n      for(var i in gruopObj){\r\n        list.push({\r\n          name:i,\r\n          value:gruopObj[i].length\r\n        })\r\n      }\r\n      console.log(list)\r\n      \r\n      \r\n      var myChart;\r\n      //避免多次初始化，只需要初始化一次\r\n      if(!pieChart){\r\n        myChart = Echarts.init(pieRef.current)\r\n        setPieChart(myChart)\r\n      }else{\r\n        myChart = pieChart\r\n      }\r\n      var option;\r\n\r\n      option = {\r\n          title: {\r\n              text: username+'新闻分类图示',\r\n              // subtext: '纯属虚构',\r\n              left: 'center'\r\n          },\r\n          tooltip: {\r\n              trigger: 'item'\r\n          },\r\n          legend: {\r\n              orient: 'vertical',\r\n              left: 'left',\r\n          },\r\n          series: [\r\n              {\r\n                  name: '发布数量',\r\n                  type: 'pie',\r\n                  radius: '50%',\r\n                  data: list,\r\n                  emphasis: {\r\n                      itemStyle: {\r\n                          shadowBlur: 10,\r\n                          shadowOffsetX: 0,\r\n                          shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                      }\r\n                  }\r\n              }\r\n          ]\r\n      };\r\n\r\n      option && myChart.setOption(option);\r\n\r\n    }\r\n    \r\n    const {username,region,role:{roleName}} = JSON.parse(localStorage.getItem(\"token\"))\r\n    \r\n    return (\r\n      <div className=\"site-card-wrapper\">\r\n        <Row gutter={16}>\r\n          <Col span={8}>\r\n            <Card title=\"用户最常浏览\" bordered={true}>\r\n              <List\r\n                size=\"small\"\r\n                // bordered\r\n                dataSource={viewList}\r\n                renderItem={item => <List.Item><a href={`#/news-manage/preview/${item.id}`}>{item.title}</a></List.Item>}\r\n              />\r\n            </Card>\r\n          </Col>\r\n          <Col span={8}>\r\n            <Card title=\"用户点赞最多\" bordered={true}>\r\n            <List\r\n                size=\"small\"\r\n                // bordered\r\n                dataSource={starList}\r\n                renderItem={item => <List.Item><a href={`#/news-manage/preview/${item.id}`}>{item.title}</a></List.Item>}\r\n              />\r\n            </Card>\r\n          </Col>\r\n          <Col span={8}>\r\n          <Card\r\n            cover={\r\n              <img\r\n                alt=\"example\"\r\n                src=\"https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png\"\r\n              />\r\n            }\r\n            actions={[\r\n              <SettingOutlined key=\"setting\" onClick={()=>{\r\n                //为了保持同步更新，先渲染组件，再创建饼状图\r\n                setTimeout(()=>{\r\n                  setVisible(true)\r\n                  //初始化饼状图\r\n                  renderPieView()\r\n                },0)\r\n              }}/>,\r\n              <EditOutlined key=\"edit\" />,\r\n              <EllipsisOutlined key=\"ellipsis\" />,\r\n            ]}\r\n          >\r\n            <Meta\r\n              avatar={<Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />}\r\n              title={username}\r\n              description={\r\n                <div>\r\n                  <b>{region===null?region:\"全球\"}</b>\r\n                  <span style={{paddingLeft:\"30px\"}}>{roleName}</span>\r\n                </div>\r\n              }\r\n            />\r\n          </Card>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Drawer title=\"个人新闻分类\" \r\n        width=\"500px\"\r\n        placement=\"right\" closable={true} onClose={()=>{setVisible(false)}} visible={visible}>\r\n          \r\n          <div ref={pieRef} style={{\r\n          height:\"300px\",\r\n          width:\"100%\",\r\n          marginTop:\"30px\"\r\n          }}></div>\r\n        </Drawer>\r\n\r\n        <div ref={barRef} style={{\r\n          height:\"300px\",\r\n          width:\"100%\",\r\n          marginTop:\"30px\"\r\n          }}></div>\r\n      </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nexport default class NoPermission extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        403 no permission\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { useState,useEffect } from 'react'\r\nimport {Button, Table, Tag, Modal, Popover, Switch} from 'antd'\r\nimport axios from 'axios'\r\nimport {DeleteOutlined,EditOutlined,ExclamationCircleOutlined} from '@ant-design/icons'\r\n\r\nconst {confirm} = Modal\r\nexport default function RightList() {\r\n  const [dataSource, setdataSource]=  useState([])\r\n  useEffect(()=>{\r\n    axios.get(\"/rights?_embed=children\").then(res=>{\r\n    const list = res.data;\r\n    list.forEach(item=>{\r\n      if(item.children.length===0)\r\n      {\r\n        item.children = \"\"\r\n      }\r\n    })\r\n    setdataSource(list);\r\n    })\r\n  },[])\r\n  const columns = [\r\n    {\r\n      title: 'ID',\r\n      dataIndex: 'id',\r\n      render:(id)=>{\r\n        return <b>{id}</b>\r\n      }\r\n    },\r\n    {\r\n      title: '权限名称',\r\n      dataIndex: 'title'\r\n    },\r\n    {\r\n      title: '权限路径',\r\n      dataIndex: 'key',\r\n      render:(key)=>{\r\n        return <Tag color=\"orange\">{key}</Tag>\r\n      }\r\n    },\r\n    {\r\n      title: '操作',\r\n      render:(item)=>{\r\n        return <div>\r\n            <Button danger shape=\"circle\" \r\n            icon={<DeleteOutlined />} onClick={()=>confirmMethod(item)} />\r\n\r\n            <Popover content={<div style={{textAlign:\"center\"}}>\r\n                    <Switch checked={item.pagepermisson} onChange={()=>switchMethod(item)}></Switch>\r\n              </div>} title=\"页面配置项\" trigger={item.pagepermisson===undefined?'':'click'}>\r\n                <Button type=\"primary\" shape=\"circle\" \r\n                icon={<EditOutlined />} disabled={item.pagepermisson===undefined}/>\r\n            </Popover>\r\n        </div>\r\n      }\r\n    },\r\n  ];\r\n\r\n  const switchMethod = (item)=>{\r\n    console.log(item);\r\n    item.pagepermisson = item.pagepermisson===1?0:1;\r\n    setdataSource([...dataSource]);\r\n    if(item.grade === 1){\r\n      axios.patch(`/rights/${item.id}`,{\r\n        pagepermisson:item.pagepermisson\r\n      })\r\n    }else{\r\n      axios.patch(`/children/${item.id}`,{\r\n        pagepermisson:item.pagepermisson\r\n      })\r\n    }\r\n  }\r\n\r\n  const confirmMethod = (item)=>{\r\n    confirm({\r\n      title: '你确定要删除？',\r\n      icon: <ExclamationCircleOutlined />,\r\n      // content: 'Some descriptions',\r\n      onOk() {\r\n        // console.log('OK');\r\n        deleteMethod(item);\r\n      },\r\n      onCancel() {\r\n        // console.log('Cancel');\r\n      },\r\n    });\r\n  }\r\n\r\n  const deleteMethod = (item)=>{\r\n    //当前页面同步状态 + 后端同步\r\n    console.log(item);\r\n    if(item.grade === 1){\r\n      setdataSource(dataSource.filter(data=>data.id !==item.id))\r\n      axios.delete(`/rights/${item.id}`)\r\n    }else{\r\n      console.log(item.rightId);\r\n      let list = dataSource.filter(data=>data.id===item.rightId)\r\n      console.log(list);\r\n      list[0].children = list[0].children.filter(data=>data.id!==item.id)\r\n      setdataSource([...dataSource]);\r\n      axios.delete(`/children/${item.id}`)\r\n    }\r\n    \r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Table dataSource={dataSource} columns={columns}\r\n      pagination={{\r\n        pageSize:5\r\n      }} />\r\n    </div>\r\n  )\r\n}\r\n","import { Table,Button,Modal,Tree } from 'antd'\r\nimport React, { useState,useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport {DeleteOutlined,EditOutlined,ExclamationCircleOutlined} from '@ant-design/icons'\r\nconst {confirm} = Modal\r\nexport default function RoleList() {\r\n  const [dataSource,setdataSource] = useState([])\r\n  const [rightList,setRightList] = useState([])\r\n  const [currentRights,setCurrentRights] = useState([])\r\n  const [currentId,setCurrentId] = useState([])\r\n  const [isModalVisible, setisModalVisible] = useState(false)\r\n  const column = [\r\n    {\r\n      title: 'ID',\r\n      dataIndex: 'id',\r\n      render:(id)=>{\r\n        return <b>{id}</b>\r\n      }\r\n    },\r\n    {\r\n      title: '角色名称',\r\n      dataIndex: 'roleName'\r\n    },\r\n    {\r\n      title: '操作',\r\n      render:(item)=>{\r\n        return <div>\r\n            <Button danger shape=\"circle\" \r\n            icon={<DeleteOutlined />} onClick={()=>confirmMethod(item)} />\r\n            <Button type=\"primary\" shape=\"circle\" \r\n            icon={<EditOutlined />} onClick={()=>{\r\n              setisModalVisible(true)\r\n              setCurrentRights(item.rights)\r\n              setCurrentId(item.id)\r\n            }}/>\r\n        </div>\r\n      }\r\n    }\r\n  ]\r\n  //获取表格内容\r\n  useEffect(()=>{\r\n    axios.get(\"/roles\").then(res=>{\r\n      setdataSource(res.data)\r\n    })\r\n  },[])\r\n  //获取弹窗内容\r\n  useEffect(()=>{\r\n    axios.get(\"/rights?_embed=children\").then(res=>{\r\n      setRightList(res.data)\r\n    })\r\n  },[])\r\n\r\n  const confirmMethod = (item)=>{\r\n    confirm({\r\n      title: '你确定要删除？',\r\n      icon: <ExclamationCircleOutlined />,\r\n      // content: 'Some descriptions',\r\n      onOk() {\r\n        // console.log('OK');\r\n        deleteMethod(item);\r\n      },\r\n      onCancel() {\r\n        // console.log('Cancel');\r\n      },\r\n    });\r\n  }\r\n\r\n  const deleteMethod = (item)=>{\r\n    //当前页面同步状态 + 后端同步\r\n      setdataSource(dataSource.filter(data=>data.id !==item.id))\r\n      axios.delete(`/roles/${item.id}`)\r\n  }\r\n\r\n  const handleOk = ()=>{\r\n    setisModalVisible(false)\r\n    setdataSource(dataSource.map(item=>{\r\n      if(item.id===currentId){\r\n        return {\r\n          ...item,\r\n          rights:currentRights\r\n        }\r\n      }\r\n      return item\r\n    }))\r\n    //patch\r\n    axios.patch(`/roles/${currentId}`,{\r\n      rights:currentRights\r\n    })\r\n  }\r\n\r\n  const handleCancel = ()=>{\r\n    setisModalVisible(false);\r\n  }\r\n  const onCheck = (checkKeys)=>{\r\n    setCurrentRights(checkKeys)\r\n  }\r\n  return (\r\n    <div>\r\n      <Table dataSource={dataSource} columns={column}\r\n      rowKey={(item)=>item.id}></Table>\r\n\r\n      <Modal title=\"权限分配\" visible={isModalVisible} \r\n      onOk={handleOk} onCancel={handleCancel}>\r\n        <Tree\r\n          checkable\r\n          checkedKeys={currentRights}\r\n          defaultSelectedKeys={dataSource[2]?.rights}\r\n          onCheck={onCheck}\r\n          checkStrictly = {true}\r\n          treeData={rightList}\r\n        />\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n","import React, { forwardRef, useState, useEffect } from 'react'\r\nimport {Form, Input, Select} from 'antd'\r\nconst {Option} = Select\r\nconst UserForm = forwardRef((props,ref) => {\r\n  const [isDisabled,setIsDisabled] = useState(false)\r\n\r\n  useEffect(() => {\r\n      setIsDisabled(props.isUpdateDisabled)\r\n  }, [props.isUpdateDisabled])\r\n\r\n  const {roleId,region} = JSON.parse(localStorage.getItem(\"token\"))\r\n  const roleObj = {\r\n    \"1\":\"superadmin\",\r\n    \"2\":\"admin\",\r\n    \"3\":\"editor\"\r\n}\r\n  const chekRegionDisabled = (item)=>{\r\n    if(props.isUpdate){\r\n        if(roleObj[roleId]===\"superadmin\"){\r\n          return false\r\n        }else{\r\n          return true\r\n        }\r\n    }else{\r\n      if(roleObj[roleId]===\"superadmin\"){\r\n        return false\r\n      }else{\r\n        return item.value!==region\r\n      }\r\n    }\r\n  }\r\n  const chekRoleDisabled = (item)=>{\r\n    if(props.isUpdate){\r\n      if(roleObj[roleId]===\"superadmin\"){\r\n        return false\r\n      }else{\r\n        return true\r\n      }\r\n  }else{\r\n    if(roleObj[roleId]===\"superadmin\"){\r\n      return false\r\n    }else{\r\n      return roleObj[item.id]!==\"editor\" \r\n    }\r\n  }\r\n  }\r\n  return (\r\n    <Form\r\n      ref={ref}\r\n    >\r\n        <Form.Item\r\n          name=\"username\"\r\n          label=\"用户名 \"\r\n          rules={[{ required: true, \r\n            message: 'Please input the title of collection!' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"password\"\r\n          label=\"密码 \"\r\n          rules={[{ required: true, \r\n            message: 'Please input the title of collection!' }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"region\"\r\n          label=\"地区 \"\r\n          rules={isDisabled?[]:[{ required: true, \r\n            message: 'Please input the title of collection!' }]}\r\n        >\r\n          <Select disabled={isDisabled}>\r\n            {\r\n              props.regionList.map(item=>\r\n                <Option value={item.value} key={item.id}\r\n                disabled={chekRegionDisabled(item)}>{item.title}</Option>\r\n              )\r\n            }\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"roleId\"\r\n          label=\"角色 \"\r\n          rules={[{ required: true, \r\n            message: 'Please input the title of collection!' }]}\r\n        >\r\n          <Select onChange={(value)=>{\r\n            if(value===1){\r\n              setIsDisabled(true)\r\n              ref.current.setFieldsValue({\r\n                region:\"\"\r\n              })\r\n            }else{\r\n              setIsDisabled(false)\r\n            }\r\n              \r\n          }}>\r\n            {\r\n              props.roleList.map(item=>\r\n                <Option value={item.id} key={item.id}\r\n                disabled={chekRoleDisabled(item)}>{item.roleName}</Option>\r\n              )\r\n            }\r\n          </Select>\r\n        </Form.Item>\r\n      </Form>\r\n  )\r\n})\r\nexport default UserForm","import React, { useState,useEffect, useRef } from 'react'\r\nimport {Button, Table, Modal, Switch} from 'antd'\r\nimport axios from 'axios'\r\nimport {DeleteOutlined,EditOutlined,ExclamationCircleOutlined} from '@ant-design/icons'\r\nimport UserForm from '../../../components/user-manage/UserForm'\r\nconst {confirm} = Modal\r\nexport default function UserList() {\r\n  const [dataSource, setdataSource]=  useState([])\r\n  const [isAddVisible, setIsAddVisible]=  useState(false)\r\n  const [isUpdateVisible, setIsUpdateVisible]=  useState(false)\r\n  const [roleList, setRoleList]=  useState([])\r\n  const [regionList, setRegionList]=  useState([])\r\n  const [current, setcurrent] = useState(null)\r\n\r\n  const [isUpdateDisabled, setIsUpdateDisabled] = useState(false)\r\n  const addForm = useRef(null)\r\n  const updateForm = useRef(null)\r\n\r\n  const {roleId,region,username} = JSON.parse(localStorage.getItem(\"token\"))\r\n  \r\n  useEffect(()=>{\r\n    const roleObj = {\r\n      \"1\":\"superadmin\",\r\n      \"2\":\"admin\",\r\n      \"3\":\"editor\"\r\n  }\r\n    axios.get(\"/users?_expand=role\").then(res=>{\r\n    const list = res.data;\r\n    setdataSource(roleObj[roleId]===\"superadmin\"?list:[\r\n      ...list.filter(item=>item.username===username),\r\n      ...list.filter(item=>item.region===region&&roleObj[item.roleId]===\"editor\")  \r\n    ]);\r\n    })\r\n  },[roleId,region,username])\r\n\r\n  useEffect(()=>{\r\n    axios.get(\"/regions\").then(res=>{\r\n    const list = res.data;\r\n    setRegionList(list);\r\n    })\r\n  },[])\r\n\r\n  useEffect(()=>{\r\n    axios.get(\"/roles\").then(res=>{\r\n    const list = res.data;\r\n    setRoleList(list);\r\n    })\r\n  },[])\r\n\r\n  //改变用户状态\r\n  const handleChange = (item)=>{\r\n    item.roleState=!item.roleState\r\n    setdataSource([...dataSource])\r\n    axios.patch(`/users/${item.id}`,{\r\n      roleState:item.roleState\r\n    })\r\n  }\r\n\r\n  //更新信息\r\n  const handleUpdate = (item)=>{\r\n    setTimeout(()=>{\r\n      setIsUpdateVisible(true)\r\n      if(item.roleId===1){\r\n        //禁用\r\n        setIsUpdateDisabled(true)\r\n      }else{\r\n        //取消禁用\r\n        setIsUpdateDisabled(false)\r\n      }\r\n      updateForm.current.setFieldsValue(item)\r\n    },0)\r\n    setcurrent(item)\r\n  }\r\n\r\n  //更新updateform方法\r\n  const updateFormOK = ()=>{\r\n    updateForm.current.validateFields().then(value=>{\r\n      setIsUpdateVisible(false)\r\n      setdataSource(dataSource.map(item=>{\r\n        if(item.id===current.id)\r\n        {\r\n          return{\r\n            ...item,\r\n            ...value,\r\n            role:roleList.filter(data=>data.id===value.roleId)[0]\r\n          }\r\n        }\r\n        return item\r\n      }))\r\n      setIsUpdateDisabled(!isUpdateDisabled)\r\n      axios.patch(`/users/${current.id}`,value)\r\n    })\r\n  }\r\n  const columns = [\r\n    {\r\n      title: '区域',\r\n      dataIndex: 'region',\r\n      filters:[\r\n        ...regionList.map(item=>({\r\n          text:item.title,\r\n          value:item.value\r\n        })),\r\n        {\r\n          text:\"全球\",\r\n          value:\"全球\"\r\n        }\r\n      ],\r\n      onFilter:(value,item)=>{\r\n        if(value===\"全球\"){\r\n          return item.region===\"\"\r\n        }\r\n        return item.region===value\r\n      },\r\n      render:(region)=>{\r\n        return <b>{region===\"\"?'全球':region}</b>\r\n      }\r\n    },\r\n    {\r\n      title: '角色名称',\r\n      dataIndex: 'role',\r\n      render:(role)=>{\r\n        return role?.roleName\r\n      }\r\n    },\r\n    {\r\n      title: '用户名',\r\n      dataIndex: 'username'\r\n    },\r\n    {\r\n      title: '用户状态',\r\n      dataIndex: 'roleState',\r\n      render:(roleState,item)=>{\r\n        return<Switch checked={roleState} disabled={item.default}\r\n        onChange={()=>{handleChange(item)}}></Switch>\r\n      }\r\n    },\r\n    {\r\n      title: '操作',\r\n      render:(item)=>{\r\n        return <div>\r\n            <Button danger shape=\"circle\" \r\n            icon={<DeleteOutlined />} onClick={()=>confirmMethod(item)} \r\n            disabled={item.default}/>\r\n\r\n            <Button type=\"primary\" shape=\"circle\" \r\n            icon={<EditOutlined />} disabled={item.default}\r\n            onClick={()=>handleUpdate(item)}/>\r\n            </div>\r\n      }\r\n    },\r\n  ];\r\n\r\n  const confirmMethod = (item)=>{\r\n    confirm({\r\n      title: '你确定要删除？',\r\n      icon: <ExclamationCircleOutlined />,\r\n      // content: 'Some descriptions',\r\n      onOk() {\r\n        deleteMethod(item);\r\n      },\r\n      onCancel() {\r\n      },\r\n    });\r\n  }\r\n\r\n  //删除\r\n  const deleteMethod = (item)=>{\r\n    //当前页面同步状态 + 后端同步\r\n    setdataSource(dataSource.filter(data=>data.id!==item.id))\r\n    axios.delete(`/users/${item.id}`)\r\n  }\r\n\r\n  //校验表单\r\n  const addFormOK = ()=>{\r\n    addForm.current.validateFields().then(value=>{\r\n      setIsAddVisible(false)\r\n      //清空表单内容\r\n      addForm.current.resetFields();\r\n      //先post到后端生成ID，再设置dataSource，方便后面的删除和更新\r\n      axios.post(`/users`,{\r\n        ...value,\r\n        \"roleState\": true,\r\n        \"default\": false\r\n      }).then(res=>{\r\n        console.log(res.data)\r\n        setdataSource([...dataSource,{\r\n          ...res.data,\r\n          role:roleList.filter(item=>item.id===value.roleId)[0]\r\n        }])\r\n      })\r\n    }).catch(err=>{\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Button type=\"primary\" onClick={()=>{\r\n        setIsAddVisible(true)\r\n      }}>添加用户</Button>\r\n      <Table dataSource={dataSource} columns={columns}\r\n      pagination={{\r\n        pageSize:5\r\n      }} \r\n      rowKey={item=>item.id}/>\r\n\r\n      <Modal\r\n      visible={isAddVisible}\r\n      title=\"添加用户\"\r\n      okText=\"确定\"\r\n      cancelText=\"取消\"\r\n      onCancel={()=>{\r\n        setIsAddVisible(false)\r\n      }}\r\n      onOk={() => addFormOK()}\r\n    >\r\n      <UserForm regionList={regionList} roleList={roleList} ref={addForm}/>\r\n    </Modal>\r\n\r\n    <Modal\r\n      visible={isUpdateVisible}\r\n      title=\"更新用户\"\r\n      okText=\"更新\"\r\n      cancelText=\"取消\"\r\n      onCancel={()=>{\r\n        setIsUpdateVisible(false)\r\n        setIsUpdateDisabled(!isUpdateDisabled)\r\n      }}\r\n      onOk={() => updateFormOK()}\r\n    >\r\n      <UserForm regionList={regionList} roleList={roleList} \r\n      ref={updateForm} isUpdateDisabled={isUpdateDisabled}/>\r\n    </Modal>\r\n    </div>\r\n  )\r\n}\r\n","import React,{ useState,useEffect } from 'react'\r\nimport { Editor } from 'react-draft-wysiwyg'\r\nimport {convertToRaw, ContentState, EditorState} from 'draft-js'\r\nimport draftToHtml from 'draftjs-to-html'\r\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\"\r\nimport htmlToDraft from 'html-to-draftjs'\r\n\r\nexport default function NewEditor(props) {\r\n  useEffect(() => {\r\n    const html = props.content\r\n    if(html===undefined)return \r\n    const contentBlock = htmlToDraft(html);\r\n    if(contentBlock){\r\n      const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks)\r\n      const editorState = EditorState.createWithContent(contentState)\r\n      setEditorState(editorState)\r\n    }\r\n  }, [props.content])\r\n\r\n  const [editorState, setEditorState] = useState(\"\")\r\n  return (\r\n    <div>\r\n      <Editor\r\n        editorState={editorState}\r\n        onEditorStateChange={(editorState)=>setEditorState\r\n          (editorState)}\r\n\r\n          onBlur={()=>{\r\n            props.getContent(draftToHtml(convertToRaw(editorState.getCurrentContent())))\r\n          }}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","import { Button, PageHeader, Steps, Form, Input, Select, message, notification } from 'antd'\r\nimport axios from 'axios';\r\nimport React,{useEffect, useState} from 'react'\r\nimport { useRef } from 'react/cjs/react.development';\r\nimport style from './News.module.css'\r\nimport NewEditor from '../../../components/news-manage/NewEditor';\r\n\r\nconst { Step } = Steps;\r\nconst {Option} = Select;\r\nexport default function NewsAdd(props) {\r\n\r\n  const [current, setCurrent] = useState(0)\r\n  const [categoryList, setCategoryList] = useState([])\r\n\r\n  const [formInfo, setFormInfo] = useState({})\r\n  const [content, setContent] = useState(\"\")\r\n\r\n  const user = JSON.parse(localStorage.getItem(\"token\"))\r\n  //收集第一步中的表单信息\r\n  const handleNext = ()=>{\r\n    if(current===0){\r\n      NewsForm.current.validateFields().then(res=>{\r\n        setFormInfo(res)\r\n        setCurrent(current+1)\r\n      }).catch(error=>{\r\n        console.log(error)\r\n      })\r\n    }else{\r\n      if(content===\"\" || content.trim()===\"<p></p>\")\r\n      {\r\n        message.error(\"新闻内容不能为空\")\r\n      }else{\r\n        console.log(formInfo,content)\r\n        setCurrent(current+1)\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n  const handlePrevious = ()=>{\r\n    setCurrent(current-1)\r\n  }\r\n\r\n  const layout = {\r\n    labelCol:{span:4},\r\n    wrapperCol:{span:20}\r\n  }\r\n\r\n  const NewsForm = useRef(null)\r\n  useEffect(()=>{\r\n    axios.get(\"/categories\").then(res=>{\r\n      setCategoryList(res.data)\r\n    })\r\n  },[])\r\n\r\n  const handleSave = (auditState)=>{\r\n    axios.post('/news',{\r\n      ...formInfo,\r\n      \"content\":content,\r\n      \"region\": user.region?user.region:\"全球\",\r\n      \"author\": user.username,\r\n      \"roleId\": user.roleId,\r\n      \"auditState\": auditState,\r\n      \"publishState\": 0,\r\n      \"createTime\": Date.now(),\r\n      \"star\": 0,\r\n      \"view\": 0,\r\n      // \"publishTime\": 0\r\n    }).then(res=>{\r\n      props.history.push(auditState===0?'/news-manage/draft':\r\n      '/audit-manage/list')\r\n      notification.info({\r\n        message:`通知`,\r\n        description:\r\n        `您可以到${auditState===0?'草稿箱':\r\n        '审核列表'}中查看您的新闻`,\r\n        placement:\"bottomRight\"\r\n      })\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <PageHeader \r\n        className=\"site-page-header\"\r\n        title=\"撰写新闻\"\r\n        subTitle=\"This is a subtitle\"\r\n        />\r\n      <Steps current={current}>\r\n        <Step title=\"基本信息\" description=\"新闻标题，新闻分类\" />\r\n        <Step title=\"新闻内容\" description=\"新闻主题内容\" />\r\n        <Step title=\"新闻提交\" description=\"保存草稿或者提交审核\" />\r\n      </Steps>\r\n\r\n      <div style={{marginTop:\"50px\"}}>\r\n        {/* 第一步 */}\r\n        <div className={current===0?'':style.active}>\r\n          <Form\r\n          name=\"basic\"\r\n          {...layout}\r\n          ref={NewsForm}\r\n          >\r\n            <Form.Item\r\n              label=\"新闻标题\"\r\n              name=\"title\"\r\n              rules={[{ required: true, message: 'Please input your username!' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              label=\"新闻分类\"\r\n              name=\"categoryId\"\r\n              rules={[{ required: true, message: 'Please input your username!' }]}\r\n            >\r\n              <Select>\r\n                {\r\n                  categoryList.map(item=>\r\n                    <Option value={item.id} key={item.id}>{item.title}</Option>\r\n                  )\r\n                }\r\n              </Select>\r\n            </Form.Item>\r\n          </Form>\r\n        </div>\r\n        {/* 第二步 */}\r\n        <div className={current===1?'':style.active}>\r\n          <NewEditor getContent={(value)=>{\r\n            setContent(value)\r\n          }}></NewEditor>\r\n        </div>\r\n        {/* 第三步 */}\r\n        <div className={current===2?'':style.active}>\r\n          \r\n        </div>\r\n      </div>\r\n      \r\n      <div style={{marginTop:\"50px\"}}>\r\n        {\r\n          current === 2 && <span>\r\n            <Button type=\"primary\" onClick={()=>handleSave(0)}>保存草稿箱</Button>\r\n            <Button danger onClick={()=>handleSave(1)}>提交审核</Button>\r\n          </span>\r\n        }\r\n        {\r\n          current<2 && <Button type=\"primary\" onClick={handleNext}>下一步</Button>\r\n        }\r\n        {\r\n          current>0 && <Button onClick={handlePrevious}>上一步</Button>\r\n        }\r\n        \r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState,useEffect } from 'react'\r\nimport {Button, Table, Modal,notification} from 'antd'\r\nimport axios from 'axios'\r\nimport {DeleteOutlined,EditOutlined,ExclamationCircleOutlined,UploadOutlined} from '@ant-design/icons'\r\n\r\nconst {confirm} = Modal\r\nexport default function NewsDraft(props) {\r\n  const [dataSource, setdataSource]=  useState([])\r\n  const {username} = JSON.parse(localStorage.getItem(\"token\"))\r\n  //获取表格内容\r\n  useEffect(() => {\r\n    axios.get(`/news?author=${username}&auditState=0&_expand=category`).then(res=>{\r\n    const list = res.data\r\n    setdataSource(list)\r\n  })\r\n}, [username])\r\n\r\n  const handleCheck = (id)=>{\r\n    axios.patch(`/news/${id}`,{\r\n      auditState:1\r\n    }).then(res=>{\r\n      props.history.push('/audit-manage/list')\r\n      notification.info({\r\n        message:`通知`,\r\n        description:\r\n        `您可以到审核列表中查看您的新闻`,\r\n        placement:\"bottomRight\"\r\n      })\r\n    })\r\n  }\r\n  const columns = [\r\n    {\r\n      title: 'ID',\r\n      dataIndex: 'id',\r\n      render:(id)=>{\r\n        return <b>{id}</b>\r\n      }\r\n    },\r\n    {\r\n      title: '新闻标题',\r\n      dataIndex: 'title',\r\n      render:(title,item)=>{\r\n        return <a href={`#/news-manage/preview/${item.id}`}>{title}</a>\r\n      }\r\n    },\r\n    {\r\n      title: '作者',\r\n      dataIndex: 'author'\r\n    },\r\n    {\r\n      title: '分类',\r\n      dataIndex: 'category',\r\n      render:(category)=>{\r\n        return category.title\r\n      }\r\n    },\r\n    {\r\n      title: '操作',\r\n      render:(item)=>{\r\n        return <div>\r\n            <Button danger shape=\"circle\" \r\n            icon={<DeleteOutlined />} onClick={()=>confirmMethod(item)} />\r\n\r\n            <Button shape=\"circle\" \r\n            icon={<EditOutlined />}\r\n            onClick={()=>{\r\n              props.history.push(`/news-manage/update/${item.id}`)\r\n            }}/>\r\n\r\n            <Button type=\"primary\" shape=\"circle\" \r\n            icon={<UploadOutlined />} onClick={()=>handleCheck(item.id)}/>\r\n        </div>\r\n      }\r\n    },\r\n  ];\r\n\r\n  const confirmMethod = (item)=>{\r\n    confirm({\r\n      title: '你确定要删除？',\r\n      icon: <ExclamationCircleOutlined />,\r\n      // content: 'Some descriptions',\r\n      onOk() {\r\n        // console.log('OK');\r\n        deleteMethod(item);\r\n      },\r\n      onCancel() {\r\n        // console.log('Cancel');\r\n      },\r\n    });\r\n  }\r\n\r\n  const deleteMethod = (item)=>{\r\n    //当前页面同步状态 + 后端同步\r\n    setdataSource(dataSource.filter(data=>data.id !==item.id))\r\n    axios.delete(`/news/${item.id}`)\r\n    \r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Table dataSource={dataSource} columns={columns}\r\n      pagination={{\r\n        pageSize:5\r\n      }} \r\n      rowKey={item=>item.id}\r\n      />\r\n      \r\n    </div>\r\n  )\r\n}\r\n","import React, { useState,useEffect,useRef,useContext } from 'react'\r\nimport {Button, Table, Modal,Form,Input} from 'antd'\r\nimport axios from 'axios'\r\nimport {DeleteOutlined,ExclamationCircleOutlined} from '@ant-design/icons'\r\n\r\nconst {confirm} = Modal\r\nconst EditableContext = React.createContext(null);\r\nexport default function NewsCategory() {\r\n  const [dataSource, setdataSource]=  useState([])\r\n  useEffect(()=>{\r\n    axios.get(\"/categories\").then(res=>{\r\n    setdataSource(res.data);\r\n    })\r\n  },[])\r\n\r\n  //点击栏目名称更新值\r\n  const handleSave = (record)=>{\r\n    console.log(record)\r\n    setdataSource(dataSource.map(item=>{\r\n      if(item.id===record.id){\r\n        return {\r\n          id:item.id,\r\n          title:record.title,\r\n          value:record.title\r\n        }\r\n      }\r\n      return item\r\n    }))\r\n    axios.patch(`/categories/${record.id}`,{\r\n      title:record.title,\r\n      value:record.value\r\n    })\r\n  }\r\n\r\n  const columns = [\r\n    {\r\n      title: 'ID',\r\n      dataIndex: 'id',\r\n      render:(id)=>{\r\n        return <b>{id}</b>\r\n      }\r\n    },\r\n    {\r\n      title: '栏目名称',\r\n      dataIndex: 'title',\r\n      onCell: (record) => ({\r\n        record,\r\n        editable: true,\r\n        dataIndex: 'title',\r\n        title: '栏目名称',\r\n        handleSave: handleSave,\r\n      })\r\n    },\r\n    {\r\n      title: '操作',\r\n      render:(item)=>{\r\n        return <div>\r\n            <Button danger shape=\"circle\" \r\n            icon={<DeleteOutlined />} onClick={()=>confirmMethod(item)} />\r\n        </div>\r\n      }\r\n    },\r\n  ];\r\n\r\n  const confirmMethod = (item)=>{\r\n    confirm({\r\n      title: '你确定要删除？',\r\n      icon: <ExclamationCircleOutlined />,\r\n      // content: 'Some descriptions',\r\n      onOk() {\r\n        // console.log('OK');\r\n        deleteMethod(item);\r\n      },\r\n      onCancel() {\r\n        // console.log('Cancel');\r\n      },\r\n    });\r\n  }\r\n\r\n  const deleteMethod = (item)=>{\r\n    //当前页面同步状态 + 后端同步\r\n    setdataSource(dataSource.filter(data=>data.id !==item.id))\r\n    axios.delete(`/categories/${item.id}`)\r\n    \r\n  }\r\n\r\n  const EditableRow = ({ index, ...props }) => {\r\n    const [form] = Form.useForm();\r\n    return (\r\n      <Form form={form} component={false}>\r\n        <EditableContext.Provider value={form}>\r\n          <tr {...props} />\r\n        </EditableContext.Provider>\r\n      </Form>\r\n    );\r\n  };\r\n  \r\n  const EditableCell = ({\r\n    title,\r\n    editable,\r\n    children,\r\n    dataIndex,\r\n    record,\r\n    handleSave,\r\n    ...restProps\r\n  }) => {\r\n    const [editing, setEditing] = useState(false);\r\n    const inputRef = useRef(null);\r\n    const form = useContext(EditableContext);\r\n    useEffect(() => {\r\n      if (editing) {\r\n        inputRef.current.focus();\r\n      }\r\n    }, [editing]);\r\n    const toggleEdit = () => {\r\n      setEditing(!editing);\r\n      form.setFieldsValue({\r\n        [dataIndex]: record[dataIndex],\r\n      });\r\n    };\r\n  \r\n    const save = async () => {\r\n      try {\r\n        const values = await form.validateFields();\r\n        toggleEdit();\r\n        handleSave({ ...record, ...values });\r\n      } catch (errInfo) {\r\n        console.log('Save failed:', errInfo);\r\n      }\r\n    };\r\n    let childNode = children;\r\n\r\n    if (editable) {\r\n      childNode = editing ? (\r\n        <Form.Item\r\n          style={{\r\n            margin: 0,\r\n          }}\r\n          name={dataIndex}\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: `${title} is required.`,\r\n            },\r\n          ]}\r\n        >\r\n          <Input ref={inputRef} onPressEnter={save} onBlur={save} />\r\n        </Form.Item>\r\n      ) : (\r\n        <div\r\n          className=\"editable-cell-value-wrap\"\r\n          style={{\r\n            paddingRight: 24,\r\n          }}\r\n          onClick={toggleEdit}\r\n        >\r\n          {children}\r\n        </div>\r\n      );\r\n    }\r\n  \r\n    return <td {...restProps}>{childNode}</td>;\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Table dataSource={dataSource} columns={columns}\r\n      pagination={{\r\n        pageSize:5\r\n      }} \r\n      rowKey={item=>item.id}\r\n      components={{\r\n        body: {\r\n          row: EditableRow,\r\n          cell: EditableCell,\r\n        }\r\n    }}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport {Table} from 'antd'\r\n\r\nexport default function NewsPublish(props) {\r\n\r\n  const columns = [\r\n    {\r\n      title: '新闻标题',\r\n      dataIndex: 'title',\r\n      render:(title,item)=>{\r\n        return <a href={`#/news-manage/preview/${item.id}`}>{title}</a>\r\n      }\r\n    },\r\n    {\r\n      title: '作者',\r\n      dataIndex: 'author'\r\n    },\r\n    {\r\n      title: '新闻分类',\r\n      dataIndex: 'category',\r\n      render:(category)=>{\r\n        return <div>{category.title}</div>\r\n      }\r\n    },\r\n    {\r\n      title: '操作',\r\n      render:(item)=>{\r\n        return <div>\r\n            {props.button(item.id)}\r\n        </div>\r\n      }\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Table dataSource={props.dataSource} columns={columns}\r\n      pagination={{\r\n        pageSize:5\r\n      }} \r\n      rowKey={item=>item.id}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","import axios from 'axios'\r\nimport {useEffect, useState} from 'react'\r\nimport {notification} from 'antd'\r\n\r\nfunction usePulish(type){\r\n  const {username} = JSON.parse(localStorage.getItem(\"token\"))\r\n  \r\n  const [dataSource, setDataSource] = useState([])\r\n  useEffect(() => {\r\n    axios(`/news?author=${username}&publishState=${type}&_expand=category`).then(res=>\r\n      {\r\n        // console.log(res.data);\r\n        setDataSource(res.data)\r\n      })\r\n  }, [username,type])\r\n\r\n  const handlePublish = (id)=>{\r\n    setDataSource(dataSource.filter(item=>item.id!==id))\r\n    axios.patch(`/news/${id}`,{\r\n      \"publishState\": 2,\r\n      \"publishTime\":Date.now()\r\n    }).then(res=>{\r\n\r\n      notification.info({\r\n        message:`通知`,\r\n        description:\r\n        `您可以到（发布管理/已经发布）中查看您的新闻`,\r\n        placement:\"bottomRight\"\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleSunset = (id)=>{\r\n    setDataSource(dataSource.filter(item=>item.id!==id))\r\n    axios.patch(`/news/${id}`,{\r\n      \"publishState\": 3\r\n    }).then(res=>{\r\n\r\n      notification.info({\r\n        message:`通知`,\r\n        description:\r\n        `您可以到（发布管理/已下线）中查看您的新闻`,\r\n        placement:\"bottomRight\"\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleDelete = (id)=>{\r\n    setDataSource(dataSource.filter(item=>item.id!==id))\r\n    axios.delete(`/news/${id}`).then(res=>{\r\n\r\n      notification.info({\r\n        message:`通知`,\r\n        description:\r\n        `您已经删除了已下线的新闻`,\r\n        placement:\"bottomRight\"\r\n      })\r\n    })\r\n  }\r\n\r\n\r\n  return {\r\n    dataSource,\r\n    handleDelete,\r\n    handlePublish,\r\n    handleSunset\r\n  }\r\n    \r\n}\r\n\r\nexport default usePulish","import { Button, PageHeader, Steps, Form, Input, Select, message, notification } from 'antd'\r\nimport axios from 'axios';\r\nimport React,{useEffect, useState} from 'react'\r\nimport { useRef } from 'react/cjs/react.development';\r\nimport style from './News.module.css'\r\nimport NewEditor from '../../../components/news-manage/NewEditor';\r\n\r\nconst { Step } = Steps;\r\nconst {Option} = Select;\r\nexport default function NewsUpdate(props) {\r\n\r\n  const [current, setCurrent] = useState(0)\r\n  const [categoryList, setCategoryList] = useState([])\r\n\r\n  const [formInfo, setFormInfo] = useState({})\r\n  const [content, setContent] = useState(\"\")\r\n\r\n  // const user = JSON.parse(localStorage.getItem(\"token\"))\r\n  //收集第一步中的表单信息\r\n  const handleNext = ()=>{\r\n    if(current===0){\r\n      NewsForm.current.validateFields().then(res=>{\r\n        setFormInfo(res)\r\n        setCurrent(current+1)\r\n      }).catch(error=>{\r\n        console.log(error)\r\n      })\r\n    }else{\r\n      if(content===\"\" || content.trim()===\"<p></p>\")\r\n      {\r\n        message.error(\"新闻内容不能为空\")\r\n      }else{\r\n        console.log(formInfo,content)\r\n        setCurrent(current+1)\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n  const handlePrevious = ()=>{\r\n    setCurrent(current-1)\r\n  }\r\n\r\n  const layout = {\r\n    labelCol:{span:4},\r\n    wrapperCol:{span:20}\r\n  }\r\n\r\n  const NewsForm = useRef(null)\r\n  useEffect(()=>{\r\n    axios.get(\"/categories\").then(res=>{\r\n      setCategoryList(res.data)\r\n    })\r\n  },[])\r\n\r\n  useEffect(() => {\r\n    axios.get(`/news/${props.match.params.id}?_expand=category&_expand=role`).then(res=>{\r\n      const {title, categoryId, content} = res.data\r\n      NewsForm.current.setFieldsValue({\r\n        title,\r\n        categoryId\r\n      })\r\n\r\n      setContent(content)\r\n    })\r\n  }, [props.match.params.id])\r\n\r\n  const handleSave = (auditState)=>{\r\n    axios.patch(`/news/${props.match.params.id}`,{\r\n      ...formInfo,\r\n      \"content\":content,\r\n      \"auditState\": auditState\r\n    }).then(res=>{\r\n      props.history.push(auditState===0?'/news-manage/draft':\r\n      '/audit-manage/list')\r\n      notification.info({\r\n        message:`通知`,\r\n        description:\r\n        `您可以到${auditState===0?'草稿箱':\r\n        '审核列表'}中查看您的新闻`,\r\n        placement:\"bottomRight\"\r\n      })\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <PageHeader \r\n        className=\"site-page-header\"\r\n        title=\"更新新闻\"\r\n        onBack={()=>props.history.goBack()}\r\n        subTitle=\"This is a subtitle\"\r\n        />\r\n      <Steps current={current}>\r\n        <Step title=\"基本信息\" description=\"新闻标题，新闻分类\" />\r\n        <Step title=\"新闻内容\" description=\"新闻主题内容\" />\r\n        <Step title=\"新闻提交\" description=\"保存草稿或者提交审核\" />\r\n      </Steps>\r\n\r\n      <div style={{marginTop:\"50px\"}}>\r\n        {/* 第一步 */}\r\n        <div className={current===0?'':style.active}>\r\n          <Form\r\n          name=\"basic\"\r\n          {...layout}\r\n          ref={NewsForm}\r\n          >\r\n            <Form.Item\r\n              label=\"新闻标题\"\r\n              name=\"title\"\r\n              rules={[{ required: true, message: 'Please input your username!' }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n\r\n            <Form.Item\r\n              label=\"新闻分类\"\r\n              name=\"categoryId\"\r\n              rules={[{ required: true, message: 'Please input your username!' }]}\r\n            >\r\n              <Select>\r\n                {\r\n                  categoryList.map(item=>\r\n                    <Option value={item.id} key={item.id}>{item.title}</Option>\r\n                  )\r\n                }\r\n              </Select>\r\n            </Form.Item>\r\n          </Form>\r\n        </div>\r\n        {/* 第二步 */}\r\n        <div className={current===1?'':style.active}>\r\n          <NewEditor getContent={(value)=>{\r\n            setContent(value)\r\n          }} content={content}></NewEditor>\r\n        </div>\r\n        {/* 第三步 */}\r\n        <div className={current===2?'':style.active}>\r\n          \r\n        </div>\r\n      </div>\r\n      \r\n      <div style={{marginTop:\"50px\"}}>\r\n        {\r\n          current === 2 && <span>\r\n            <Button type=\"primary\" onClick={()=>handleSave(0)}>保存草稿箱</Button>\r\n            <Button danger onClick={()=>handleSave(1)}>提交审核</Button>\r\n          </span>\r\n        }\r\n        {\r\n          current<2 && <Button type=\"primary\" onClick={handleNext}>下一步</Button>\r\n        }\r\n        {\r\n          current>0 && <Button onClick={handlePrevious}>上一步</Button>\r\n        }\r\n        \r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect,useState } from 'react'\r\nimport {Redirect, Route, Switch} from 'react-router-dom'\r\nimport { Spin } from 'antd'\r\nimport axios from 'axios'\r\nimport { connect } from 'react-redux'\r\nimport Home from '../../views/sandbox/home/Home'\r\nimport NoPermission from '../../views/sandbox/nopermission/NoPermission'\r\nimport RightList from '../../views/sandbox/right-manage/RightList'\r\nimport RoleList from '../../views/sandbox/right-manage/RoleList'\r\nimport UserList from '../../views/sandbox/user-manage/UserList'\r\nimport NewsAdd from '../../views/sandbox/news-manage/NewsAdd'\r\nimport NewsDraft from '../../views/sandbox/news-manage/NewsDraft'\r\nimport NewsCategory from '../../views/sandbox/news-manage/NewsCategory'\r\nimport Audit from '../../views/sandbox/audit-manage/Audit'\r\nimport AuditList from '../../views/sandbox/audit-manage/AuditList'\r\nimport Unpublished from '../../views/sandbox/publish-manage/Unpublished'\r\nimport Published from '../../views/sandbox/publish-manage/Published'\r\nimport Sunset from '../../views/sandbox/publish-manage/Sunset'\r\nimport NewsPreview from '../../views/sandbox/news-manage/NewsPreview'\r\nimport NewsUpdate from '../../views/sandbox/news-manage/NewsUpdate'\r\n\r\nconst LocalRouterMap = {\r\n  \"/home\":Home,\r\n  \"/user-manage/list\":UserList,\r\n  \"/right-manage/role/list\":RoleList,\r\n  \"/right-manage/right/list\":RightList,\r\n  \"/news-manage/add\":NewsAdd,\r\n  \"/news-manage/draft\":NewsDraft,\r\n  \"/news-manage/category\":NewsCategory,\r\n  \"/news-manage/preview/:id\":NewsPreview,\r\n  \"/news-manage/update/:id\":NewsUpdate,\r\n  \"/audit-manage/audit\":Audit,\r\n  \"/audit-manage/list\":AuditList,\r\n  \"/publish-manage/unpublished\":Unpublished,\r\n  \"/publish-manage/published\":Published,\r\n  \"/publish-manage/sunset\":Sunset\r\n}\r\n\r\nfunction NewsRouter(props) {\r\n  const [backRouteList, setBackRouteList] = useState([])\r\n  //取得路由列表\r\n  useEffect(()=>{\r\n    Promise.all([\r\n      axios.get(\"/rights\"),\r\n      axios.get(\"/children\"),\r\n    ]).then(res=>{\r\n      // console.log([...res[0].data,...res[1].data])\r\n      setBackRouteList([...res[0].data,...res[1].data])\r\n    })\r\n  },[])\r\n  \r\n  const {role:{rights,id}} = JSON.parse(localStorage.getItem(\"token\"))\r\n\r\n  const checkRoute = (item)=>{\r\n    return LocalRouterMap[item.key] && (item.pagepermisson || item.routepermisson)\r\n  }\r\n  const checkUserPermission = (item)=>{\r\n    return id===1?rights.checked.includes(item.key)\r\n    :rights.includes(item.key)\r\n  }\r\n\r\n  return (\r\n    <Spin size=\"large\" spinning={props.isLoading}>\r\n      <Switch>\r\n        {\r\n          backRouteList.map(item=>\r\n            {\r\n              if(checkRoute(item) && checkUserPermission(item)){\r\n                return <Route path={item.key} key={item.key} \r\n                component={LocalRouterMap[item.key]} exact/>\r\n              }\r\n              return null\r\n            }\r\n          )\r\n        }\r\n        <Redirect from=\"/\" to=\"/home\" exact/>\r\n        {\r\n          backRouteList.length>0 &&<Route path=\"*\" component={NoPermission} />\r\n        }\r\n      </Switch>\r\n    </Spin>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({LoadingReducer:{isLoading}})=>({\r\n    isLoading\r\n})\r\n\r\nexport default connect(mapStateToProps)(NewsRouter)","import React,{ useEffect, useState } from 'react'\r\nimport { PageHeader, Descriptions } from 'antd'\r\nimport moment from 'moment'\r\nimport axios from 'axios'\r\n\r\nexport default function NewsPreview(props) {\r\n  const [newsInfo, setNewsInfo] = useState(null)\r\n\r\n  const auditList = [\"未审核\",'审核中','已通过','未通过']\r\n  const pulishList = [\"未发布\",'待发布','已上线','已下线']\r\n  const colorList = [\"black\",\"orange\",\"green\",\"red\"]\r\n\r\n  useEffect(() => {\r\n    axios.get(`/news/${props.match.params.id}?_expand=category&_expand=role`).then(res=>{\r\n      setNewsInfo(res.data)\r\n    })\r\n  }, [props.match.params.id])\r\n  return (\r\n    <div>\r\n      {\r\n        newsInfo&& <div>\r\n          <PageHeader\r\n            onBack={() => window.history.back()}\r\n            title={newsInfo?.title}\r\n            subTitle={newsInfo.category.title}\r\n          >\r\n            <Descriptions size=\"small\" column={3}>\r\n              {/* 第一行 */}\r\n              <Descriptions.Item label=\"创建者\">{newsInfo.author}</Descriptions.Item>\r\n              <Descriptions.Item label=\"创建时间\">{moment(newsInfo.createTime).format(\"YYYY/MM/DD HH:mm:ss\")}</Descriptions.Item>\r\n              <Descriptions.Item label=\"发布时间\">{\r\n                newsInfo.publishTime?moment(newsInfo.publishTime).format(\"YYYY/MM/DD HH:mm:ss\"):\"-\"\r\n              }</Descriptions.Item>\r\n              {/* 第二行 */}\r\n              <Descriptions.Item label=\"区域\">{newsInfo.region}</Descriptions.Item>\r\n              <Descriptions.Item label=\"审核状态\" ><span style={{color:colorList[newsInfo.auditState]}}> {auditList[newsInfo.auditState]} </span></Descriptions.Item>\r\n              <Descriptions.Item label=\"发布状态\" ><span style={{color:colorList[newsInfo.auditState]}}> {pulishList[newsInfo.publishState]} </span> </Descriptions.Item>\r\n              {/* 第三行 */}\r\n              <Descriptions.Item label=\"访问数量\">{newsInfo.view}</Descriptions.Item>\r\n              <Descriptions.Item label=\"点赞数量\">{newsInfo.star}</Descriptions.Item>\r\n              <Descriptions.Item label=\"评论数量\">0</Descriptions.Item>\r\n            </Descriptions>\r\n          </PageHeader>\r\n\r\n          <div dangerouslySetInnerHTML={{\r\n            __html:newsInfo.content\r\n          }}style={{\r\n            margin:\"0 24px\",\r\n            border:\"1px solid black\"\r\n          }}>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n","import React,{ useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport {Table, Button, notification} from 'antd'\r\nexport default function Audit() {\r\n  const [dataSource, setdataSource]=  useState([])\r\n  const {roleId,region,username} = JSON.parse(localStorage.getItem(\"token\"))\r\n  \r\n  useEffect(() => {\r\n    const roleObj = {\r\n      \"1\":\"superadmin\",\r\n      \"2\":\"admin\",\r\n      \"3\":\"editor\"\r\n    }\r\n    axios.get(`/news?auditState=1&_expand=category`).then(res=>{\r\n      const list = res.data;\r\n      setdataSource(roleObj[roleId]===\"superadmin\"?list:[\r\n      ...list.filter(item=>item.author===username),\r\n      ...list.filter(item=>item.region===region&&roleObj[item.roleId]===\"editor\")  \r\n    ]);\r\n    })\r\n  }, [roleId,region,username])\r\n\r\n    //表格的列\r\n    const columns = [\r\n      {\r\n        title: '新闻标题',\r\n        dataIndex: 'title',\r\n        render:(title,item)=>{\r\n          return <a href={`#/news-manage/preview/${item.id}`}>{title}</a>\r\n        }\r\n      },\r\n      {\r\n        title: '作者',\r\n        dataIndex: 'author'\r\n      },\r\n      {\r\n        title: '新闻分类',\r\n        dataIndex: 'category',\r\n        render:(category)=>{\r\n          return <div>{category.title}</div>\r\n        }\r\n      },\r\n      {\r\n        title: '操作',\r\n        render:(item)=>{\r\n          return <div>\r\n          <Button type=\"primary\" onClick={()=>handleAudit(item,2,1)}>通过</Button>\r\n          <Button danger onClick={()=>handleAudit(item,3,0)} >驳回</Button>\r\n          </div>\r\n        }\r\n      },\r\n    ];\r\n\r\n    const handleAudit = (item,auditState,publishState)=>{\r\n      setdataSource(dataSource.filter(data=>data.id!==item.id))\r\n      axios.patch(`/news/${item.id}`,{\r\n        auditState,\r\n        publishState\r\n      }).then(res=>{\r\n        notification.info({\r\n          message:`通知`,\r\n          description:\r\n          `您可以到[审核管理/审核列表]中查看您的新闻的审核状态`,\r\n          placement:\"bottomRight\"\r\n        })\r\n      })\r\n    }\r\n  return (\r\n    <div>\r\n      <Table dataSource={dataSource} columns={columns}\r\n      pagination={{\r\n        pageSize:5\r\n      }} \r\n      rowKey={item=>item.id}/>\r\n    </div>\r\n  )\r\n}\r\n","import React,{ useEffect, useState } from 'react'\r\nimport {Table, Button, Tag, notification  } from 'antd'\r\nimport axios from 'axios'\r\nexport default function AuditList(props) {\r\n\r\n  const [dataSource, setDataSource] = useState([])\r\n  const {username} = JSON.parse(localStorage.getItem(\"token\"))\r\n\r\n  useEffect(() => {\r\n    axios.get(`/news?author=${username}&auditState_ne=0\r\n    &publishState_lte=1&_expand=category`).then(res=>{\r\n      setDataSource(res.data)\r\n    })\r\n  }, [username])\r\n\r\n  //表格的列\r\n  const columns = [\r\n    {\r\n      title: '新闻标题',\r\n      dataIndex: 'title',\r\n      render:(title,item)=>{\r\n        return <a href={`#/news-manage/preview/${item.id}`}>{title}</a>\r\n      }\r\n    },\r\n    {\r\n      title: '作者',\r\n      dataIndex: 'author'\r\n    },\r\n    {\r\n      title: '新闻分类',\r\n      dataIndex: 'category',\r\n      render:(category)=>{\r\n        return <div>{category.title}</div>\r\n      }\r\n    },\r\n    {\r\n      title: '审核状态',\r\n      dataIndex: 'auditState',\r\n      render:(auditState)=>{\r\n        const colorList = [\"\",\"orange\",\"green\",\"red\"]\r\n        const auditList = [\"草稿箱\",\"审核中\",\"已通过\",\"未通过\"]\r\n        return <Tag color={colorList[auditState]}>{auditList[auditState]}</Tag>\r\n      }\r\n    },\r\n    {\r\n      title: '操作',\r\n      render:(item)=>{\r\n        return <div>\r\n            {\r\n              item.auditState===1 &&\r\n              <Button danger onClick={()=>handlrRevert(item)}>撤销</Button>\r\n            }\r\n            {\r\n              item.auditState===2 &&\r\n              <Button danger onClick={()=>handlePublish(item)}>发布</Button>\r\n            }\r\n            {\r\n              item.auditState===3 &&\r\n              <Button type=\"primary\" onClick={()=>handleUpdate(item)}>更新</Button>\r\n            }\r\n        </div>\r\n      }\r\n    },\r\n  ];\r\n\r\n  //撤销按钮\r\n  const handlrRevert = (item)=>{\r\n    setDataSource(dataSource.filter(data=>data.id!==item.id))\r\n    axios.patch(`/news/${item.id}`,{\r\n      auditState:0\r\n    }).then(res=>{\r\n      notification.info({\r\n        message:`通知`,\r\n        description:\r\n        `您可以到草稿箱中查看您的新闻`,\r\n        placement:\"bottomRight\"\r\n      });\r\n    })\r\n  }\r\n\r\n  //更新按钮\r\n  const handleUpdate = (item)=>{\r\n    props.history.push(`/news-manage/update/${item.id}`)\r\n  }\r\n\r\n  //发布按钮\r\n  const handlePublish = (item)=>{\r\n    axios.patch(`/news/${item.id}`,{\r\n      \"publishState\": 2,\r\n      \"publishTime\":Date.now()\r\n    }).then(res=>{\r\n      props.history.push('/publish-manage/published')\r\n\r\n      notification.info({\r\n        message:`通知`,\r\n        description:\r\n        `您可以到（发布管理/已经发布）中查看您的新闻`,\r\n        placement:\"bottomRight\"\r\n      })\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Table dataSource={dataSource} columns={columns}\r\n      pagination={{\r\n        pageSize:5\r\n      }} \r\n      rowKey={item=>item.id}/>\r\n    </div>\r\n  )\r\n}\r\n","import NewsPublish from '../../../components/publish-manage/NewsPublish'\r\nimport usePulish from '../../../components/publish-manage/usePublish'\r\nimport {Button} from 'antd'\r\nexport default function Unpublished() {\r\n\r\n  //1为待发布\r\n  const {dataSource,handlePublish} = usePulish(1)\r\n  return (\r\n    <div>\r\n      <NewsPublish dataSource={dataSource} button={(id)=><Button\r\n      type=\"primary\" onClick={()=>handlePublish(id)}>\r\n        发布\r\n      </Button>}></NewsPublish>\r\n    </div>\r\n  )\r\n}\r\n","import NewsPublish from '../../../components/publish-manage/NewsPublish'\r\nimport usePulish from '../../../components/publish-manage/usePublish'\r\nimport {Button} from 'antd'\r\nexport default function Published() {\r\n  \r\n  //2为已发布\r\n  const {dataSource,handleSunset} = usePulish(2)\r\n  return (\r\n    <div>\r\n      <NewsPublish dataSource={dataSource} button={(id)=><Button danger\r\n      onClick={()=>handleSunset(id)}>\r\n        下线\r\n      </Button>}></NewsPublish>\r\n    </div>\r\n  )\r\n}\r\n","import NewsPublish from '../../../components/publish-manage/NewsPublish'\r\nimport usePulish from '../../../components/publish-manage/usePublish'\r\nimport {Button} from 'antd'\r\nexport default function Sunset() {\r\n  \r\n  //3为已下线\r\n  const {dataSource,handleDelete} = usePulish(3)\r\n  return (\r\n    <div>\r\n      <NewsPublish dataSource={dataSource} button={(id)=><Button danger\r\n      onClick={()=>handleDelete(id)}>\r\n        删除\r\n      </Button>}></NewsPublish>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport SideMenu from '../../components/sandbox/SideMenu'\r\nimport TopHeader from '../../components/sandbox/TopHeader'\r\nimport NProgress from 'nprogress'\r\nimport 'nprogress/nprogress.css'\r\n//css\r\nimport './NewSandBox.css'\r\n//antd\r\nimport {Layout} from 'antd'\r\nimport NewsRouter from '../../components/sandbox/NewsRouter'\r\nconst {Content} = Layout;\r\nexport default function NewSandBox(){\r\n    NProgress.start()\r\n    useEffect(()=>{\r\n      NProgress.done()\r\n    },[])\r\n    return (\r\n      <Layout>\r\n        <SideMenu></SideMenu>\r\n        <Layout className=\"site-layout\">\r\n          <TopHeader></TopHeader>\r\n\r\n          <Content\r\n              className=\"site-layout-background\"\r\n              style={{\r\n                margin: '24px 16px',\r\n                padding: 24,\r\n                minHeight: 280,\r\n              }}\r\n            >\r\n              <NewsRouter></NewsRouter>\r\n          </Content>\r\n        </Layout>\r\n      </Layout>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport {Route,HashRouter,Switch, Redirect} from 'react-router-dom'\r\nimport Login from '../views/login/Login'\r\nimport Detail from '../views/news/Detail'\r\nimport News from '../views/news/News'\r\nimport NewsSandBox from '../views/sandbox/NewSandBox'\r\n\r\nexport default class IndexRouter extends Component {\r\n  render() {\r\n    return (\r\n      <HashRouter>\r\n        <Switch>\r\n          <Route path=\"/login\" component={Login} />\r\n          <Route path=\"/news\" component={News} />\r\n          <Route path=\"/detail/:id\" component={Detail} />\r\n          {/* <Route path=\"/\" component={NewsSandBox} /> */}\r\n          <Route path=\"/\" render={()=>\r\n            localStorage.getItem(\"token\") ? \r\n            <NewsSandBox></NewsSandBox>:\r\n            <Redirect to=\"/login\"/> \r\n          }/>\r\n        </Switch>\r\n      </HashRouter>\r\n    )\r\n  }\r\n}\r\n","import {createStore, combineReducers} from 'redux'\r\nimport {CollApsedReducer} from'./reducers/CollapsedReducer'\r\nimport {LoadingReducer} from './reducers/LoadingReducer'\r\n\r\nimport {persistReducer, persistStore} from 'redux-persist'\r\nimport storage from 'redux-persist/lib/storage'\r\n\r\nconst persistConfig = {\r\n  key:'Tom',\r\n  storage,\r\n  blacklist:['LoadingReducer']\r\n}\r\n\r\nconst reducer = combineReducers({\r\n  CollApsedReducer,\r\n  LoadingReducer\r\n})\r\n\r\nconst persistedReducer = persistReducer(persistConfig, reducer)\r\n\r\nconst store = createStore(persistedReducer);\r\nconst persistor = persistStore(store)\r\n\r\nexport {\r\n  store,\r\n  persistor\r\n} \r\n\r\n/**\r\n * 发布\r\n * store.dispatch()\r\n * 订阅\r\n * store.subscribe()\r\n */","export const CollApsedReducer = (prevState={\r\n  isCollapsed:false\r\n}, action)=>{\r\n  let {type} = action\r\n\r\n  switch(type)\r\n  {\r\n    case \"change_collapsed\": \r\n        let newState = {...prevState}\r\n        newState.isCollapsed = !newState.isCollapsed\r\n        return newState\r\n    default:\r\n      return prevState\r\n  }\r\n}","export const LoadingReducer = (prevState={\r\n  isLoading:false\r\n}, action)=>{\r\n  let {type,payload} = action\r\n\r\n  switch(type)\r\n  {\r\n    case \"change_loading\": \r\n        let newState = {...prevState}\r\n        newState.isLoading = payload\r\n        return newState\r\n    default:\r\n      return prevState\r\n  }\r\n}","import IndexRouter from './router/IndexRouter'\nimport { Provider } from 'react-redux'\nimport './App.css'\nimport {store,persistor} from './redux/store'\nimport {PersistGate} from 'redux-persist/integration/react'\n\nfunction App(){\n\n  return <Provider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <IndexRouter></IndexRouter>\n    </PersistGate>\n  </Provider>\n}\n\nexport default App","import axios from 'axios'\r\nimport {store} from '../redux/store'\r\naxios.defaults.baseURL=\"http://3.1.20.221/\"\r\n\r\n// axios.defaults.headers\r\n\r\n// axios.interceptors.request.use\r\n// axios.interceptors.response.use\r\n\r\naxios.interceptors.request.use(function (config) {\r\n    // Do something before request is sent\r\n    // 显示loading\r\n    store.dispatch({\r\n        type:\"change_loading\",\r\n        payload:true\r\n    })\r\n    return config;\r\n  }, function (error) {\r\n    // Do something with request error\r\n    return Promise.reject(error);\r\n  });\r\n\r\n// Add a response interceptor\r\naxios.interceptors.response.use(function (response) {\r\n    // Any status code that lie within the range of 2xx cause this function to trigger\r\n    // Do something with response data\r\n\r\n    store.dispatch({\r\n        type:\"change_loading\",\r\n        payload:false\r\n    })\r\n\r\n    //隐藏loading\r\n    return response;\r\n  }, function (error) {\r\n    // Any status codes that falls outside the range of 2xx cause this function to trigger\r\n    // Do something with response error\r\n    store.dispatch({\r\n        type:\"change_loading\",\r\n        payload:false\r\n    })\r\n\r\n     //隐藏loading\r\n    return Promise.reject(error);\r\n  });\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport './util/http'\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n//reportWebVitals();\n"],"sourceRoot":""}