(this.webpackJsonpnewssystem=this.webpackJsonpnewssystem||[]).push([[0],{102:function(e,t,n){e.exports={active:"News_active__11Z-5"}},327:function(e,t,n){},345:function(e,t,n){},420:function(e,t,n){},429:function(e,t,n){},525:function(e,t,n){},528:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(41),r=n.n(i),s=(n(327),n(175)),o=n(176),l=n(207),d=n(205),u=n(143),j=n(43),b=n(316),O=n(539),h=n(540),f=n(61),p=n(548),x=n(549),m=n(13),g=n.n(m),v=(n(345),n(1));function y(e){return Object(v.jsx)("div",{style:{background:"rgb(35,39,65)",height:"100%"},children:Object(v.jsxs)("div",{className:"formContainer",children:[Object(v.jsx)("div",{className:"loginTitle",children:"\u5168\u7403\u65b0\u95fb\u53d1\u5e03\u7ba1\u7406\u7cfb\u7edf"}),Object(v.jsxs)(O.a,{name:"normal_login",className:"login-form",onFinish:function(t){console.log(t),g.a.get("/users?username=".concat(t.username,"&password=").concat(t.password,"&roleState=true&_expand=role")).then((function(t){console.log(t.data),0===t.data.length?b.b.error("\u7528\u6237\u540d\u6216\u5bc6\u7801\u4e0d\u5339\u914d"):(localStorage.setItem("token",JSON.stringify(t.data[0])),e.history.push("/"))}))},children:[Object(v.jsx)(O.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(v.jsx)(h.a,{prefix:Object(v.jsx)(p.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(v.jsx)(O.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(v.jsx)(h.a,{prefix:Object(v.jsx)(x.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(v.jsxs)(O.a.Item,{children:[Object(v.jsx)(f.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u767b\u5f55"}),"Or ",Object(v.jsx)("a",{href:"www.baidu.com",children:"register now!"})]})]})]})})}var S=n(27),w=n(16),k=n(541),I=n(544),C=n(153),N=n.n(C),_=n(550);function T(e){var t=Object(a.useState)(null),n=Object(w.a)(t,2),c=n[0],i=n[1];Object(a.useEffect)((function(){g.a.get("/news/".concat(e.match.params.id,"?_expand=category&_expand=role")).then((function(e){return i(Object(S.a)(Object(S.a)({},e.data),{},{view:e.data.view+1})),e.data})).then((function(t){g.a.patch("/news/".concat(e.match.params.id),{view:t.view+1})}))}),[e.match.params.id]);return Object(v.jsx)("div",{children:c&&Object(v.jsxs)("div",{children:[Object(v.jsx)(k.a,{onBack:function(){return window.history.back()},title:null===c||void 0===c?void 0:c.title,subTitle:Object(v.jsxs)("div",{children:[c.category.title,Object(v.jsx)(_.a,{twoToneColor:"#eb2f96",onClick:function(){return i(Object(S.a)(Object(S.a)({},c),{},{star:c.star+1})),void g.a.patch("/news/".concat(e.match.params.id),{star:c.star+1})}})]}),children:Object(v.jsxs)(I.b,{size:"small",column:3,children:[Object(v.jsx)(I.b.Item,{label:"\u521b\u5efa\u8005",children:c.author}),Object(v.jsx)(I.b.Item,{label:"\u53d1\u5e03\u65f6\u95f4",children:c.publishTime?N()(c.publishTime).format("YYYY/MM/DD HH:mm:ss"):"-"}),Object(v.jsx)(I.b.Item,{label:"\u533a\u57df",children:c.region}),Object(v.jsx)(I.b.Item,{label:"\u8bbf\u95ee\u6570\u91cf",children:c.view}),Object(v.jsx)(I.b.Item,{label:"\u70b9\u8d5e\u6570\u91cf",children:c.star}),Object(v.jsx)(I.b.Item,{label:"\u8bc4\u8bba\u6570\u91cf",children:"0"})]})}),Object(v.jsx)("div",{dangerouslySetInnerHTML:{__html:c.content},style:{margin:"0 24px",border:"1px solid black"}})]})})}var E=n(136),R=n(76),D=n(536),z=n(545),L=n(154),P=n.n(L);function q(){var e=Object(a.useState)([]),t=Object(w.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){g.a.get("/news?publishState=2&_expand=category").then((function(e){c(Object.entries(P.a.groupBy(e.data,(function(e){return e.category.title})))),console.log(n)}))}),[n]),Object(v.jsxs)("div",{style:{width:"95%",margin:"0 auto"},children:[Object(v.jsx)(k.a,{className:"site-page-header",title:"\u5168\u7403\u5927\u65b0\u95fb",subTitle:"\u67e5\u770b\u65b0\u95fb"}),Object(v.jsx)("div",{className:"site-card-wrapper",children:Object(v.jsx)(E.a,{gutter:[16,16],children:n.map((function(e){return Object(v.jsx)(R.a,{span:8,children:Object(v.jsx)(D.a,{title:e[0],bordered:!0,hoverable:!0,children:Object(v.jsx)(z.b,{size:"small",pagination:{pageSize:3},dataSource:e[1],renderItem:function(e){return Object(v.jsx)(z.b.Item,{children:Object(v.jsx)("a",{href:"#/detail/".concat(e.id),children:e.title})})}})})},e[0])}))})})]})}var J=n(534),F=n(82),B=(n(420),n(551)),Y=n(98),H=J.a.Sider,K=F.a.SubMenu,M={"/home":Object(v.jsx)(p.a,{}),"/user-manage/list":Object(v.jsx)(B.a,{}),"/right-manage/role/list":Object(v.jsx)(p.a,{}),"/right-manage/right/list":Object(v.jsx)(p.a,{})};var A=Object(Y.b)((function(e){return{isCollapsed:e.CollApsedReducer.isCollapsed}}))(Object(j.g)((function(e){var t=Object(a.useState)([]),n=Object(w.a)(t,2),c=n[0],i=n[1];Object(a.useEffect)((function(){g.a.get("/rights?_embed=children").then((function(e){i(e.data)}))}),[]);var r=JSON.parse(localStorage.getItem("token")).role,s=r.rights,o=r.id,l=function(e){return e.pagepermisson&&(1===o?s.checked.includes(e.key):s.includes(e.key))},d=e.location.pathname,u=["/"+e.location.pathname.split("/")[1]];return Object(v.jsx)(H,{trigger:null,collapsible:!0,collapsed:e.isCollapsed,children:Object(v.jsxs)("div",{style:{display:"flex",height:"100%",flexDirection:"column"},children:[Object(v.jsx)("div",{className:"logo",children:"\u5168\u7403\u65b0\u95fb\u53d1\u5e03\u7ba1\u7406\u7cfb\u7edf"}),Object(v.jsx)("div",{style:{flex:1,overflow:"auto"},children:Object(v.jsx)(F.a,{theme:"dark",mode:"inline",selectedKeys:d,className:"aaaaa",defaultOpenKeys:u,children:function t(n){return n.map((function(n){var a;return(null===(a=n.children)||void 0===a?void 0:a.length)>0&&l(n)?Object(v.jsx)(K,{icon:M[n.key],title:n.title,children:t(n.children)},n.key):l(n)&&Object(v.jsx)(F.a.Item,{icon:M[n.key],onClick:function(){e.history.push(n.key)},children:n.title},n.key)}))}(c)})})]})})}))),U=n(200),V=n(317),X=n(552),W=n(553),G=J.a.Header;var Z=Object(Y.b)((function(e){return{isCollapsed:e.CollApsedReducer.isCollapsed}}),{changeCollapsed:function(){return{type:"change_collapsed"}}})(Object(j.g)((function(e){var t=function(){e.changeCollapsed()},n=JSON.parse(localStorage.getItem("token")),a=n.role.roleName,c=n.username,i=Object(v.jsxs)(F.a,{children:[Object(v.jsx)(F.a.Item,{children:a}),Object(v.jsx)(F.a.Item,{danger:!0,onClick:function(){localStorage.removeItem("token"),e.history.replace("/login")},children:"\u9000\u51fa"})]});return Object(v.jsxs)(G,{className:"site-layout-background",style:{padding:"0 16px"},children:[e.isCollapsed?Object(v.jsx)(X.a,{onClick:t}):Object(v.jsx)(W.a,{onClick:t}),Object(v.jsxs)("div",{style:{float:"right"},children:[Object(v.jsxs)("span",{children:["\u6b22\u8fce",Object(v.jsxs)("span",{style:{color:"#1890ff"},children:[" ",c]}),"\u56de\u6765"]}),Object(v.jsx)(U.a,{overlay:i,children:Object(v.jsx)(V.a,{size:"large",icon:Object(v.jsx)(p.a,{})})})]})]})}))),Q=n(238),$=n.n(Q),ee=(n(428),n(429),n(56)),te=n(198),ne=n(543),ae=n(554),ce=n(555),ie=n(132),re=n(241),se=D.a.Meta;var oe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{children:"403 no permission"})}}]),n}(a.Component),le=n(542),de=n(546),ue=n(320),je=n(547),be=n(535),Oe=n(556),he=n(156),fe=le.a.confirm;var pe=n(538),xe=le.a.confirm;var me=n(155),ge=me.a.Option,ve=Object(a.forwardRef)((function(e,t){var n=Object(a.useState)(!1),c=Object(w.a)(n,2),i=c[0],r=c[1];Object(a.useEffect)((function(){r(e.isUpdateDisabled)}),[e.isUpdateDisabled]);var s=JSON.parse(localStorage.getItem("token")),o=s.roleId,l=s.region,d={1:"superadmin",2:"admin",3:"editor"},u=function(t){return e.isUpdate?"superadmin"!==d[o]:"superadmin"!==d[o]&&t.value!==l},j=function(t){return e.isUpdate?"superadmin"!==d[o]:"superadmin"!==d[o]&&"editor"!==d[t.id]};return Object(v.jsxs)(O.a,{ref:t,children:[Object(v.jsx)(O.a.Item,{name:"username",label:"\u7528\u6237\u540d ",rules:[{required:!0,message:"Please input the title of collection!"}],children:Object(v.jsx)(h.a,{})}),Object(v.jsx)(O.a.Item,{name:"password",label:"\u5bc6\u7801 ",rules:[{required:!0,message:"Please input the title of collection!"}],children:Object(v.jsx)(h.a,{})}),Object(v.jsx)(O.a.Item,{name:"region",label:"\u5730\u533a ",rules:i?[]:[{required:!0,message:"Please input the title of collection!"}],children:Object(v.jsx)(me.a,{disabled:i,children:e.regionList.map((function(e){return Object(v.jsx)(ge,{value:e.value,disabled:u(e),children:e.title},e.id)}))})}),Object(v.jsx)(O.a.Item,{name:"roleId",label:"\u89d2\u8272 ",rules:[{required:!0,message:"Please input the title of collection!"}],children:Object(v.jsx)(me.a,{onChange:function(e){1===e?(r(!0),t.current.setFieldsValue({region:""})):r(!1)},children:e.roleList.map((function(e){return Object(v.jsx)(ge,{value:e.id,disabled:j(e),children:e.roleName},e.id)}))})})]})})),ye=le.a.confirm;var Se=n(537),we=n(319),ke=n(201),Ie=n(102),Ce=n.n(Ie),Ne=n(307),_e=n(127),Te=n(308),Ee=n.n(Te),Re=(n(524),n(309)),De=n.n(Re);function ze(e){Object(a.useEffect)((function(){var t=e.content;if(void 0!==t){var n=De()(t);if(n){var a=_e.ContentState.createFromBlockArray(n.contentBlocks),c=_e.EditorState.createWithContent(a);i(c)}}}),[e.content]);var t=Object(a.useState)(""),n=Object(w.a)(t,2),c=n[0],i=n[1];return Object(v.jsx)("div",{children:Object(v.jsx)(Ne.Editor,{editorState:c,onEditorStateChange:function(e){return i(e)},onBlur:function(){e.getContent(Ee()(Object(_e.convertToRaw)(c.getCurrentContent())))}})})}var Le=Se.a.Step,Pe=me.a.Option;var qe=n(557),Je=le.a.confirm;var Fe=n(240),Be=n.n(Fe),Ye=n(310),He=n(196),Ke=n(245),Me=le.a.confirm,Ae=c.a.createContext(null);function Ue(e){var t=[{title:"\u65b0\u95fb\u6807\u9898",dataIndex:"title",render:function(e,t){return Object(v.jsx)("a",{href:"#/news-manage/preview/".concat(t.id),children:e})}},{title:"\u4f5c\u8005",dataIndex:"author"},{title:"\u65b0\u95fb\u5206\u7c7b",dataIndex:"category",render:function(e){return Object(v.jsx)("div",{children:e.title})}},{title:"\u64cd\u4f5c",render:function(t){return Object(v.jsx)("div",{children:e.button(t.id)})}}];return Object(v.jsx)("div",{children:Object(v.jsx)(be.a,{dataSource:e.dataSource,columns:t,pagination:{pageSize:5},rowKey:function(e){return e.id}})})}var Ve=function(e){var t=JSON.parse(localStorage.getItem("token")).username,n=Object(a.useState)([]),c=Object(w.a)(n,2),i=c[0],r=c[1];return Object(a.useEffect)((function(){g()("/news?author=".concat(t,"&publishState=").concat(e,"&_expand=category")).then((function(e){r(e.data)}))}),[t,e]),{dataSource:i,handleDelete:function(e){r(i.filter((function(t){return t.id!==e}))),g.a.delete("/news/".concat(e)).then((function(e){we.a.info({message:"\u901a\u77e5",description:"\u60a8\u5df2\u7ecf\u5220\u9664\u4e86\u5df2\u4e0b\u7ebf\u7684\u65b0\u95fb",placement:"bottomRight"})}))},handlePublish:function(e){r(i.filter((function(t){return t.id!==e}))),g.a.patch("/news/".concat(e),{publishState:2,publishTime:Date.now()}).then((function(e){we.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230\uff08\u53d1\u5e03\u7ba1\u7406/\u5df2\u7ecf\u53d1\u5e03\uff09\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb",placement:"bottomRight"})}))},handleSunset:function(e){r(i.filter((function(t){return t.id!==e}))),g.a.patch("/news/".concat(e),{publishState:3}).then((function(e){we.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230\uff08\u53d1\u5e03\u7ba1\u7406/\u5df2\u4e0b\u7ebf\uff09\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb",placement:"bottomRight"})}))}}};var Xe=Se.a.Step,We=me.a.Option;var Ge={"/home":function(){var e=Object(a.useState)([]),t=Object(w.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),r=Object(w.a)(i,2),s=r[0],o=r[1],l=Object(a.useState)([]),d=Object(w.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(!1),O=Object(w.a)(b,2),h=O[0],f=O[1],p=Object(a.useState)(null),x=Object(w.a)(p,2),m=x[0],y=x[1],S=Object(a.useRef)(),k=Object(a.useRef)();Object(a.useEffect)((function(){g.a.get("/news?publishState=2&_expand=category&_sort=view&_order=desc&limit=6").then((function(e){c(e.data)}))}),[]),Object(a.useEffect)((function(){g.a.get("/news?publishState=2&_expand=category&_sort=star&_order=desc&limit=6").then((function(e){o(e.data)}))}),[]),Object(a.useEffect)((function(){return g.a.get("/news?publishState=2&_expand=category").then((function(e){j(e.data),I(P.a.groupBy(e.data,(function(e){return e.category.title})))})),function(){window.onresize=null}}),[]);var I=function(e){var t=re.a(S.current),n={title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u6570\u91cf"]},xAxis:{data:Object.keys(e),axisLabel:{rotate:"60",interval:0}},yAxis:{minInterval:1},series:[{name:"\u6570\u91cf",type:"bar",data:Object.values(e).map((function(e){return e.length}))}]};t.setOption(n),window.onresize=function(){t.resize()}},C=JSON.parse(localStorage.getItem("token")),N=C.username,_=C.region,T=C.role.roleName;return Object(v.jsxs)("div",{className:"site-card-wrapper",children:[Object(v.jsxs)(E.a,{gutter:16,children:[Object(v.jsx)(R.a,{span:8,children:Object(v.jsx)(D.a,{title:"\u7528\u6237\u6700\u5e38\u6d4f\u89c8",bordered:!0,children:Object(v.jsx)(z.b,{size:"small",dataSource:n,renderItem:function(e){return Object(v.jsx)(z.b.Item,{children:Object(v.jsx)("a",{href:"#/news-manage/preview/".concat(e.id),children:e.title})})}})})}),Object(v.jsx)(R.a,{span:8,children:Object(v.jsx)(D.a,{title:"\u7528\u6237\u70b9\u8d5e\u6700\u591a",bordered:!0,children:Object(v.jsx)(z.b,{size:"small",dataSource:s,renderItem:function(e){return Object(v.jsx)(z.b.Item,{children:Object(v.jsx)("a",{href:"#/news-manage/preview/".concat(e.id),children:e.title})})}})})}),Object(v.jsx)(R.a,{span:8,children:Object(v.jsx)(D.a,{cover:Object(v.jsx)("img",{alt:"example",src:"https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png"}),actions:[Object(v.jsx)(ae.a,{onClick:function(){setTimeout((function(){f(!0),function(e){var t,n,a=u.filter((function(e){return e.author===N})),c=P.a.groupBy(a,(function(e){return e.category.title})),i=[];for(var r in c)i.push({name:r,value:c[r].length});console.log(i),m?t=m:(t=re.a(k.current),y(t)),(n={title:{text:N+"\u65b0\u95fb\u5206\u7c7b\u56fe\u793a",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"\u53d1\u5e03\u6570\u91cf",type:"pie",radius:"50%",data:i,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})&&t.setOption(n)}()}),0)}},"setting"),Object(v.jsx)(ce.a,{},"edit"),Object(v.jsx)(ie.a,{},"ellipsis")],children:Object(v.jsx)(se,{avatar:Object(v.jsx)(V.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:N,description:Object(v.jsxs)("div",{children:[Object(v.jsx)("b",{children:null===_?_:"\u5168\u7403"}),Object(v.jsx)("span",{style:{paddingLeft:"30px"},children:T})]})})})})]}),Object(v.jsx)(ne.a,{title:"\u4e2a\u4eba\u65b0\u95fb\u5206\u7c7b",width:"500px",placement:"right",closable:!0,onClose:function(){f(!1)},visible:h,children:Object(v.jsx)("div",{ref:k,style:{height:"300px",width:"100%",marginTop:"30px"}})}),Object(v.jsx)("div",{ref:S,style:{height:"300px",width:"100%",marginTop:"30px"}})]})},"/user-manage/list":function(){var e=Object(a.useState)([]),t=Object(w.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),r=Object(w.a)(i,2),s=r[0],o=r[1],l=Object(a.useState)(!1),d=Object(w.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)([]),O=Object(w.a)(b,2),h=O[0],p=O[1],x=Object(a.useState)([]),m=Object(w.a)(x,2),y=m[0],k=m[1],I=Object(a.useState)(null),C=Object(w.a)(I,2),N=C[0],_=C[1],T=Object(a.useState)(!1),E=Object(w.a)(T,2),R=E[0],D=E[1],z=Object(a.useRef)(null),L=Object(a.useRef)(null),P=JSON.parse(localStorage.getItem("token")),q=P.roleId,J=P.region,F=P.username;Object(a.useEffect)((function(){var e={1:"superadmin",2:"admin",3:"editor"};g.a.get("/users?_expand=role").then((function(t){var n=t.data;c("superadmin"===e[q]?n:[].concat(Object(ee.a)(n.filter((function(e){return e.username===F}))),Object(ee.a)(n.filter((function(t){return t.region===J&&"editor"===e[t.roleId]})))))}))}),[q,J,F]),Object(a.useEffect)((function(){g.a.get("/regions").then((function(e){var t=e.data;k(t)}))}),[]),Object(a.useEffect)((function(){g.a.get("/roles").then((function(e){var t=e.data;p(t)}))}),[]);var B=[{title:"\u533a\u57df",dataIndex:"region",filters:[].concat(Object(ee.a)(y.map((function(e){return{text:e.title,value:e.value}}))),[{text:"\u5168\u7403",value:"\u5168\u7403"}]),onFilter:function(e,t){return"\u5168\u7403"===e?""===t.region:t.region===e},render:function(e){return Object(v.jsx)("b",{children:""===e?"\u5168\u7403":e})}},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"role",render:function(e){return null===e||void 0===e?void 0:e.roleName}},{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u7528\u6237\u72b6\u6001",dataIndex:"roleState",render:function(e,t){return Object(v.jsx)(je.a,{checked:e,disabled:t.default,onChange:function(){!function(e){e.roleState=!e.roleState,c(Object(ee.a)(n)),g.a.patch("/users/".concat(e.id),{roleState:e.roleState})}(t)}})}},{title:"\u64cd\u4f5c",render:function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)(f.a,{danger:!0,shape:"circle",icon:Object(v.jsx)(Oe.a,{}),onClick:function(){return Y(e)},disabled:e.default}),Object(v.jsx)(f.a,{type:"primary",shape:"circle",icon:Object(v.jsx)(ce.a,{}),disabled:e.default,onClick:function(){return function(e){setTimeout((function(){j(!0),1===e.roleId?D(!0):D(!1),L.current.setFieldsValue(e)}),0),_(e)}(e)}})]})}}],Y=function(e){ye({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\uff1f",icon:Object(v.jsx)(he.a,{}),onOk:function(){H(e)},onCancel:function(){}})},H=function(e){c(n.filter((function(t){return t.id!==e.id}))),g.a.delete("/users/".concat(e.id))};return Object(v.jsxs)("div",{children:[Object(v.jsx)(f.a,{type:"primary",onClick:function(){o(!0)},children:"\u6dfb\u52a0\u7528\u6237"}),Object(v.jsx)(be.a,{dataSource:n,columns:B,pagination:{pageSize:5},rowKey:function(e){return e.id}}),Object(v.jsx)(le.a,{visible:s,title:"\u6dfb\u52a0\u7528\u6237",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onCancel:function(){o(!1)},onOk:function(){z.current.validateFields().then((function(e){o(!1),z.current.resetFields(),g.a.post("/users",Object(S.a)(Object(S.a)({},e),{},{roleState:!0,default:!1})).then((function(t){console.log(t.data),c([].concat(Object(ee.a)(n),[Object(S.a)(Object(S.a)({},t.data),{},{role:h.filter((function(t){return t.id===e.roleId}))[0]})]))}))})).catch((function(e){console.log(e)}))},children:Object(v.jsx)(ve,{regionList:y,roleList:h,ref:z})}),Object(v.jsx)(le.a,{visible:u,title:"\u66f4\u65b0\u7528\u6237",okText:"\u66f4\u65b0",cancelText:"\u53d6\u6d88",onCancel:function(){j(!1),D(!R)},onOk:function(){L.current.validateFields().then((function(e){j(!1),c(n.map((function(t){return t.id===N.id?Object(S.a)(Object(S.a)(Object(S.a)({},t),e),{},{role:h.filter((function(t){return t.id===e.roleId}))[0]}):t}))),D(!R),g.a.patch("/users/".concat(N.id),e)}))},children:Object(v.jsx)(ve,{regionList:y,roleList:h,ref:L,isUpdateDisabled:R})})]})},"/right-manage/role/list":function(){var e,t=Object(a.useState)([]),n=Object(w.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),s=Object(w.a)(r,2),o=s[0],l=s[1],d=Object(a.useState)([]),u=Object(w.a)(d,2),j=u[0],b=u[1],O=Object(a.useState)([]),h=Object(w.a)(O,2),p=h[0],x=h[1],m=Object(a.useState)(!1),y=Object(w.a)(m,2),k=y[0],I=y[1],C=[{title:"ID",dataIndex:"id",render:function(e){return Object(v.jsx)("b",{children:e})}},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"roleName"},{title:"\u64cd\u4f5c",render:function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)(f.a,{danger:!0,shape:"circle",icon:Object(v.jsx)(Oe.a,{}),onClick:function(){return N(e)}}),Object(v.jsx)(f.a,{type:"primary",shape:"circle",icon:Object(v.jsx)(ce.a,{}),onClick:function(){I(!0),b(e.rights),x(e.id)}})]})}}];Object(a.useEffect)((function(){g.a.get("/roles").then((function(e){i(e.data)}))}),[]),Object(a.useEffect)((function(){g.a.get("/rights?_embed=children").then((function(e){l(e.data)}))}),[]);var N=function(e){xe({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\uff1f",icon:Object(v.jsx)(he.a,{}),onOk:function(){_(e)},onCancel:function(){}})},_=function(e){i(c.filter((function(t){return t.id!==e.id}))),g.a.delete("/roles/".concat(e.id))};return Object(v.jsxs)("div",{children:[Object(v.jsx)(be.a,{dataSource:c,columns:C,rowKey:function(e){return e.id}}),Object(v.jsx)(le.a,{title:"\u6743\u9650\u5206\u914d",visible:k,onOk:function(){I(!1),i(c.map((function(e){return e.id===p?Object(S.a)(Object(S.a)({},e),{},{rights:j}):e}))),g.a.patch("/roles/".concat(p),{rights:j})},onCancel:function(){I(!1)},children:Object(v.jsx)(pe.a,{checkable:!0,checkedKeys:j,defaultSelectedKeys:null===(e=c[2])||void 0===e?void 0:e.rights,onCheck:function(e){b(e)},checkStrictly:!0,treeData:o})})]})},"/right-manage/right/list":function(){var e=Object(a.useState)([]),t=Object(w.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){g.a.get("/rights?_embed=children").then((function(e){var t=e.data;t.forEach((function(e){0===e.children.length&&(e.children="")})),c(t)}))}),[]);var i=[{title:"ID",dataIndex:"id",render:function(e){return Object(v.jsx)("b",{children:e})}},{title:"\u6743\u9650\u540d\u79f0",dataIndex:"title"},{title:"\u6743\u9650\u8def\u5f84",dataIndex:"key",render:function(e){return Object(v.jsx)(de.a,{color:"orange",children:e})}},{title:"\u64cd\u4f5c",render:function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)(f.a,{danger:!0,shape:"circle",icon:Object(v.jsx)(Oe.a,{}),onClick:function(){return s(e)}}),Object(v.jsx)(ue.a,{content:Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(je.a,{checked:e.pagepermisson,onChange:function(){return r(e)}})}),title:"\u9875\u9762\u914d\u7f6e\u9879",trigger:void 0===e.pagepermisson?"":"click",children:Object(v.jsx)(f.a,{type:"primary",shape:"circle",icon:Object(v.jsx)(ce.a,{}),disabled:void 0===e.pagepermisson})})]})}}],r=function(e){console.log(e),e.pagepermisson=1===e.pagepermisson?0:1,c(Object(ee.a)(n)),1===e.grade?g.a.patch("/rights/".concat(e.id),{pagepermisson:e.pagepermisson}):g.a.patch("/children/".concat(e.id),{pagepermisson:e.pagepermisson})},s=function(e){fe({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\uff1f",icon:Object(v.jsx)(he.a,{}),onOk:function(){o(e)},onCancel:function(){}})},o=function(e){if(console.log(e),1===e.grade)c(n.filter((function(t){return t.id!==e.id}))),g.a.delete("/rights/".concat(e.id));else{console.log(e.rightId);var t=n.filter((function(t){return t.id===e.rightId}));console.log(t),t[0].children=t[0].children.filter((function(t){return t.id!==e.id})),c(Object(ee.a)(n)),g.a.delete("/children/".concat(e.id))}};return Object(v.jsx)("div",{children:Object(v.jsx)(be.a,{dataSource:n,columns:i,pagination:{pageSize:5}})})},"/news-manage/add":function(e){var t=Object(a.useState)(0),n=Object(w.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),s=Object(w.a)(r,2),o=s[0],l=s[1],d=Object(a.useState)({}),u=Object(w.a)(d,2),j=u[0],p=u[1],x=Object(a.useState)(""),m=Object(w.a)(x,2),y=m[0],I=m[1],C=JSON.parse(localStorage.getItem("token")),N=Object(ke.useRef)(null);Object(a.useEffect)((function(){g.a.get("/categories").then((function(e){l(e.data)}))}),[]);var _=function(t){g.a.post("/news",Object(S.a)(Object(S.a)({},j),{},{content:y,region:C.region?C.region:"\u5168\u7403",author:C.username,roleId:C.roleId,auditState:t,publishState:0,createTime:Date.now(),star:0,view:0})).then((function(n){e.history.push(0===t?"/news-manage/draft":"/audit-manage/list"),we.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230".concat(0===t?"\u8349\u7a3f\u7bb1":"\u5ba1\u6838\u5217\u8868","\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb"),placement:"bottomRight"})}))};return Object(v.jsxs)("div",{children:[Object(v.jsx)(k.a,{className:"site-page-header",title:"\u64b0\u5199\u65b0\u95fb",subTitle:"This is a subtitle"}),Object(v.jsxs)(Se.a,{current:c,children:[Object(v.jsx)(Le,{title:"\u57fa\u672c\u4fe1\u606f",description:"\u65b0\u95fb\u6807\u9898\uff0c\u65b0\u95fb\u5206\u7c7b"}),Object(v.jsx)(Le,{title:"\u65b0\u95fb\u5185\u5bb9",description:"\u65b0\u95fb\u4e3b\u9898\u5185\u5bb9"}),Object(v.jsx)(Le,{title:"\u65b0\u95fb\u63d0\u4ea4",description:"\u4fdd\u5b58\u8349\u7a3f\u6216\u8005\u63d0\u4ea4\u5ba1\u6838"})]}),Object(v.jsxs)("div",{style:{marginTop:"50px"},children:[Object(v.jsx)("div",{className:0===c?"":Ce.a.active,children:Object(v.jsxs)(O.a,Object(S.a)(Object(S.a)({name:"basic"},{labelCol:{span:4},wrapperCol:{span:20}}),{},{ref:N,children:[Object(v.jsx)(O.a.Item,{label:"\u65b0\u95fb\u6807\u9898",name:"title",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(h.a,{})}),Object(v.jsx)(O.a.Item,{label:"\u65b0\u95fb\u5206\u7c7b",name:"categoryId",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(me.a,{children:o.map((function(e){return Object(v.jsx)(Pe,{value:e.id,children:e.title},e.id)}))})})]}))}),Object(v.jsx)("div",{className:1===c?"":Ce.a.active,children:Object(v.jsx)(ze,{getContent:function(e){I(e)}})}),Object(v.jsx)("div",{className:2===c?"":Ce.a.active})]}),Object(v.jsxs)("div",{style:{marginTop:"50px"},children:[2===c&&Object(v.jsxs)("span",{children:[Object(v.jsx)(f.a,{type:"primary",onClick:function(){return _(0)},children:"\u4fdd\u5b58\u8349\u7a3f\u7bb1"}),Object(v.jsx)(f.a,{danger:!0,onClick:function(){return _(1)},children:"\u63d0\u4ea4\u5ba1\u6838"})]}),c<2&&Object(v.jsx)(f.a,{type:"primary",onClick:function(){0===c?N.current.validateFields().then((function(e){p(e),i(c+1)})).catch((function(e){console.log(e)})):""===y||"<p></p>"===y.trim()?b.b.error("\u65b0\u95fb\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"):(console.log(j,y),i(c+1))},children:"\u4e0b\u4e00\u6b65"}),c>0&&Object(v.jsx)(f.a,{onClick:function(){i(c-1)},children:"\u4e0a\u4e00\u6b65"})]})]})},"/news-manage/draft":function(e){var t=Object(a.useState)([]),n=Object(w.a)(t,2),c=n[0],i=n[1],r=JSON.parse(localStorage.getItem("token")).username;Object(a.useEffect)((function(){g.a.get("/news?author=".concat(r,"&auditState=0&_expand=category")).then((function(e){var t=e.data;i(t)}))}),[r]);var s=[{title:"ID",dataIndex:"id",render:function(e){return Object(v.jsx)("b",{children:e})}},{title:"\u65b0\u95fb\u6807\u9898",dataIndex:"title",render:function(e,t){return Object(v.jsx)("a",{href:"#/news-manage/preview/".concat(t.id),children:e})}},{title:"\u4f5c\u8005",dataIndex:"author"},{title:"\u5206\u7c7b",dataIndex:"category",render:function(e){return e.title}},{title:"\u64cd\u4f5c",render:function(t){return Object(v.jsxs)("div",{children:[Object(v.jsx)(f.a,{danger:!0,shape:"circle",icon:Object(v.jsx)(Oe.a,{}),onClick:function(){return o(t)}}),Object(v.jsx)(f.a,{shape:"circle",icon:Object(v.jsx)(ce.a,{}),onClick:function(){e.history.push("/news-manage/update/".concat(t.id))}}),Object(v.jsx)(f.a,{type:"primary",shape:"circle",icon:Object(v.jsx)(qe.a,{}),onClick:function(){return n=t.id,void g.a.patch("/news/".concat(n),{auditState:1}).then((function(t){e.history.push("/audit-manage/list"),we.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230\u5ba1\u6838\u5217\u8868\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb",placement:"bottomRight"})}));var n}})]})}}],o=function(e){Je({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\uff1f",icon:Object(v.jsx)(he.a,{}),onOk:function(){l(e)},onCancel:function(){}})},l=function(e){i(c.filter((function(t){return t.id!==e.id}))),g.a.delete("/news/".concat(e.id))};return Object(v.jsx)("div",{children:Object(v.jsx)(be.a,{dataSource:c,columns:s,pagination:{pageSize:5},rowKey:function(e){return e.id}})})},"/news-manage/category":function(){var e=Object(a.useState)([]),t=Object(w.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){g.a.get("/categories").then((function(e){c(e.data)}))}),[]);var i=function(e){console.log(e),c(n.map((function(t){return t.id===e.id?{id:t.id,title:e.title,value:e.title}:t}))),g.a.patch("/categories/".concat(e.id),{title:e.title,value:e.value})},r=[{title:"ID",dataIndex:"id",render:function(e){return Object(v.jsx)("b",{children:e})}},{title:"\u680f\u76ee\u540d\u79f0",dataIndex:"title",onCell:function(e){return{record:e,editable:!0,dataIndex:"title",title:"\u680f\u76ee\u540d\u79f0",handleSave:i}}},{title:"\u64cd\u4f5c",render:function(e){return Object(v.jsx)("div",{children:Object(v.jsx)(f.a,{danger:!0,shape:"circle",icon:Object(v.jsx)(Oe.a,{}),onClick:function(){return s(e)}})})}}],s=function(e){Me({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\uff1f",icon:Object(v.jsx)(he.a,{}),onOk:function(){o(e)},onCancel:function(){}})},o=function(e){c(n.filter((function(t){return t.id!==e.id}))),g.a.delete("/categories/".concat(e.id))};return Object(v.jsx)("div",{children:Object(v.jsx)(be.a,{dataSource:n,columns:r,pagination:{pageSize:5},rowKey:function(e){return e.id},components:{body:{row:function(e){e.index;var t=Object(Ke.a)(e,["index"]),n=O.a.useForm(),a=Object(w.a)(n,1)[0];return Object(v.jsx)(O.a,{form:a,component:!1,children:Object(v.jsx)(Ae.Provider,{value:a,children:Object(v.jsx)("tr",Object(S.a)({},t))})})},cell:function(e){var t=e.title,n=e.editable,c=e.children,i=e.dataIndex,r=e.record,s=e.handleSave,o=Object(Ke.a)(e,["title","editable","children","dataIndex","record","handleSave"]),l=Object(a.useState)(!1),d=Object(w.a)(l,2),u=d[0],j=d[1],b=Object(a.useRef)(null),f=Object(a.useContext)(Ae);Object(a.useEffect)((function(){u&&b.current.focus()}),[u]);var p=function(){j(!u),f.setFieldsValue(Object(He.a)({},i,r[i]))},x=function(){var e=Object(Ye.a)(Be.a.mark((function e(){var t;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.validateFields();case 3:t=e.sent,p(),s(Object(S.a)(Object(S.a)({},r),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),m=c;return n&&(m=u?Object(v.jsx)(O.a.Item,{style:{margin:0},name:i,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(v.jsx)(h.a,{ref:b,onPressEnter:x,onBlur:x})}):Object(v.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:p,children:c})),Object(v.jsx)("td",Object(S.a)(Object(S.a)({},o),{},{children:m}))}}}})})},"/news-manage/preview/:id":function(e){var t=Object(a.useState)(null),n=Object(w.a)(t,2),c=n[0],i=n[1],r=["black","orange","green","red"];return Object(a.useEffect)((function(){g.a.get("/news/".concat(e.match.params.id,"?_expand=category&_expand=role")).then((function(e){i(e.data)}))}),[e.match.params.id]),Object(v.jsx)("div",{children:c&&Object(v.jsxs)("div",{children:[Object(v.jsx)(k.a,{onBack:function(){return window.history.back()},title:null===c||void 0===c?void 0:c.title,subTitle:c.category.title,children:Object(v.jsxs)(I.b,{size:"small",column:3,children:[Object(v.jsx)(I.b.Item,{label:"\u521b\u5efa\u8005",children:c.author}),Object(v.jsx)(I.b.Item,{label:"\u521b\u5efa\u65f6\u95f4",children:N()(c.createTime).format("YYYY/MM/DD HH:mm:ss")}),Object(v.jsx)(I.b.Item,{label:"\u53d1\u5e03\u65f6\u95f4",children:c.publishTime?N()(c.publishTime).format("YYYY/MM/DD HH:mm:ss"):"-"}),Object(v.jsx)(I.b.Item,{label:"\u533a\u57df",children:c.region}),Object(v.jsx)(I.b.Item,{label:"\u5ba1\u6838\u72b6\u6001",children:Object(v.jsxs)("span",{style:{color:r[c.auditState]},children:[" ",["\u672a\u5ba1\u6838","\u5ba1\u6838\u4e2d","\u5df2\u901a\u8fc7","\u672a\u901a\u8fc7"][c.auditState]," "]})}),Object(v.jsxs)(I.b.Item,{label:"\u53d1\u5e03\u72b6\u6001",children:[Object(v.jsxs)("span",{style:{color:r[c.auditState]},children:[" ",["\u672a\u53d1\u5e03","\u5f85\u53d1\u5e03","\u5df2\u4e0a\u7ebf","\u5df2\u4e0b\u7ebf"][c.publishState]," "]})," "]}),Object(v.jsx)(I.b.Item,{label:"\u8bbf\u95ee\u6570\u91cf",children:c.view}),Object(v.jsx)(I.b.Item,{label:"\u70b9\u8d5e\u6570\u91cf",children:c.star}),Object(v.jsx)(I.b.Item,{label:"\u8bc4\u8bba\u6570\u91cf",children:"0"})]})}),Object(v.jsx)("div",{dangerouslySetInnerHTML:{__html:c.content},style:{margin:"0 24px",border:"1px solid black"}})]})})},"/news-manage/update/:id":function(e){var t=Object(a.useState)(0),n=Object(w.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)([]),s=Object(w.a)(r,2),o=s[0],l=s[1],d=Object(a.useState)({}),u=Object(w.a)(d,2),j=u[0],p=u[1],x=Object(a.useState)(""),m=Object(w.a)(x,2),y=m[0],I=m[1],C=Object(ke.useRef)(null);Object(a.useEffect)((function(){g.a.get("/categories").then((function(e){l(e.data)}))}),[]),Object(a.useEffect)((function(){g.a.get("/news/".concat(e.match.params.id,"?_expand=category&_expand=role")).then((function(e){var t=e.data,n=t.title,a=t.categoryId,c=t.content;C.current.setFieldsValue({title:n,categoryId:a}),I(c)}))}),[e.match.params.id]);var N=function(t){g.a.patch("/news/".concat(e.match.params.id),Object(S.a)(Object(S.a)({},j),{},{content:y,auditState:t})).then((function(n){e.history.push(0===t?"/news-manage/draft":"/audit-manage/list"),we.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230".concat(0===t?"\u8349\u7a3f\u7bb1":"\u5ba1\u6838\u5217\u8868","\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb"),placement:"bottomRight"})}))};return Object(v.jsxs)("div",{children:[Object(v.jsx)(k.a,{className:"site-page-header",title:"\u66f4\u65b0\u65b0\u95fb",onBack:function(){return e.history.goBack()},subTitle:"This is a subtitle"}),Object(v.jsxs)(Se.a,{current:c,children:[Object(v.jsx)(Xe,{title:"\u57fa\u672c\u4fe1\u606f",description:"\u65b0\u95fb\u6807\u9898\uff0c\u65b0\u95fb\u5206\u7c7b"}),Object(v.jsx)(Xe,{title:"\u65b0\u95fb\u5185\u5bb9",description:"\u65b0\u95fb\u4e3b\u9898\u5185\u5bb9"}),Object(v.jsx)(Xe,{title:"\u65b0\u95fb\u63d0\u4ea4",description:"\u4fdd\u5b58\u8349\u7a3f\u6216\u8005\u63d0\u4ea4\u5ba1\u6838"})]}),Object(v.jsxs)("div",{style:{marginTop:"50px"},children:[Object(v.jsx)("div",{className:0===c?"":Ce.a.active,children:Object(v.jsxs)(O.a,Object(S.a)(Object(S.a)({name:"basic"},{labelCol:{span:4},wrapperCol:{span:20}}),{},{ref:C,children:[Object(v.jsx)(O.a.Item,{label:"\u65b0\u95fb\u6807\u9898",name:"title",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(h.a,{})}),Object(v.jsx)(O.a.Item,{label:"\u65b0\u95fb\u5206\u7c7b",name:"categoryId",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(me.a,{children:o.map((function(e){return Object(v.jsx)(We,{value:e.id,children:e.title},e.id)}))})})]}))}),Object(v.jsx)("div",{className:1===c?"":Ce.a.active,children:Object(v.jsx)(ze,{getContent:function(e){I(e)},content:y})}),Object(v.jsx)("div",{className:2===c?"":Ce.a.active})]}),Object(v.jsxs)("div",{style:{marginTop:"50px"},children:[2===c&&Object(v.jsxs)("span",{children:[Object(v.jsx)(f.a,{type:"primary",onClick:function(){return N(0)},children:"\u4fdd\u5b58\u8349\u7a3f\u7bb1"}),Object(v.jsx)(f.a,{danger:!0,onClick:function(){return N(1)},children:"\u63d0\u4ea4\u5ba1\u6838"})]}),c<2&&Object(v.jsx)(f.a,{type:"primary",onClick:function(){0===c?C.current.validateFields().then((function(e){p(e),i(c+1)})).catch((function(e){console.log(e)})):""===y||"<p></p>"===y.trim()?b.b.error("\u65b0\u95fb\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"):(console.log(j,y),i(c+1))},children:"\u4e0b\u4e00\u6b65"}),c>0&&Object(v.jsx)(f.a,{onClick:function(){i(c-1)},children:"\u4e0a\u4e00\u6b65"})]})]})},"/audit-manage/audit":function(){var e=Object(a.useState)([]),t=Object(w.a)(e,2),n=t[0],c=t[1],i=JSON.parse(localStorage.getItem("token")),r=i.roleId,s=i.region,o=i.username;Object(a.useEffect)((function(){var e={1:"superadmin",2:"admin",3:"editor"};g.a.get("/news?auditState=1&_expand=category").then((function(t){var n=t.data;c("superadmin"===e[r]?n:[].concat(Object(ee.a)(n.filter((function(e){return e.author===o}))),Object(ee.a)(n.filter((function(t){return t.region===s&&"editor"===e[t.roleId]})))))}))}),[r,s,o]);var l=[{title:"\u65b0\u95fb\u6807\u9898",dataIndex:"title",render:function(e,t){return Object(v.jsx)("a",{href:"#/news-manage/preview/".concat(t.id),children:e})}},{title:"\u4f5c\u8005",dataIndex:"author"},{title:"\u65b0\u95fb\u5206\u7c7b",dataIndex:"category",render:function(e){return Object(v.jsx)("div",{children:e.title})}},{title:"\u64cd\u4f5c",render:function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)(f.a,{type:"primary",onClick:function(){return d(e,2,1)},children:"\u901a\u8fc7"}),Object(v.jsx)(f.a,{danger:!0,onClick:function(){return d(e,3,0)},children:"\u9a73\u56de"})]})}}],d=function(e,t,a){c(n.filter((function(t){return t.id!==e.id}))),g.a.patch("/news/".concat(e.id),{auditState:t,publishState:a}).then((function(e){we.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230[\u5ba1\u6838\u7ba1\u7406/\u5ba1\u6838\u5217\u8868]\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb\u7684\u5ba1\u6838\u72b6\u6001",placement:"bottomRight"})}))};return Object(v.jsx)("div",{children:Object(v.jsx)(be.a,{dataSource:n,columns:l,pagination:{pageSize:5},rowKey:function(e){return e.id}})})},"/audit-manage/list":function(e){var t=Object(a.useState)([]),n=Object(w.a)(t,2),c=n[0],i=n[1],r=JSON.parse(localStorage.getItem("token")).username;Object(a.useEffect)((function(){g.a.get("/news?author=".concat(r,"&auditState_ne=0\n    &publishState_lte=1&_expand=category")).then((function(e){i(e.data)}))}),[r]);var s=[{title:"\u65b0\u95fb\u6807\u9898",dataIndex:"title",render:function(e,t){return Object(v.jsx)("a",{href:"#/news-manage/preview/".concat(t.id),children:e})}},{title:"\u4f5c\u8005",dataIndex:"author"},{title:"\u65b0\u95fb\u5206\u7c7b",dataIndex:"category",render:function(e){return Object(v.jsx)("div",{children:e.title})}},{title:"\u5ba1\u6838\u72b6\u6001",dataIndex:"auditState",render:function(e){return Object(v.jsx)(de.a,{color:["","orange","green","red"][e],children:["\u8349\u7a3f\u7bb1","\u5ba1\u6838\u4e2d","\u5df2\u901a\u8fc7","\u672a\u901a\u8fc7"][e]})}},{title:"\u64cd\u4f5c",render:function(e){return Object(v.jsxs)("div",{children:[1===e.auditState&&Object(v.jsx)(f.a,{danger:!0,onClick:function(){return o(e)},children:"\u64a4\u9500"}),2===e.auditState&&Object(v.jsx)(f.a,{danger:!0,onClick:function(){return d(e)},children:"\u53d1\u5e03"}),3===e.auditState&&Object(v.jsx)(f.a,{type:"primary",onClick:function(){return l(e)},children:"\u66f4\u65b0"})]})}}],o=function(e){i(c.filter((function(t){return t.id!==e.id}))),g.a.patch("/news/".concat(e.id),{auditState:0}).then((function(e){we.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230\u8349\u7a3f\u7bb1\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb",placement:"bottomRight"})}))},l=function(t){e.history.push("/news-manage/update/".concat(t.id))},d=function(t){g.a.patch("/news/".concat(t.id),{publishState:2,publishTime:Date.now()}).then((function(t){e.history.push("/publish-manage/published"),we.a.info({message:"\u901a\u77e5",description:"\u60a8\u53ef\u4ee5\u5230\uff08\u53d1\u5e03\u7ba1\u7406/\u5df2\u7ecf\u53d1\u5e03\uff09\u4e2d\u67e5\u770b\u60a8\u7684\u65b0\u95fb",placement:"bottomRight"})}))};return Object(v.jsx)("div",{children:Object(v.jsx)(be.a,{dataSource:c,columns:s,pagination:{pageSize:5},rowKey:function(e){return e.id}})})},"/publish-manage/unpublished":function(){var e=Ve(1),t=e.dataSource,n=e.handlePublish;return Object(v.jsx)("div",{children:Object(v.jsx)(Ue,{dataSource:t,button:function(e){return Object(v.jsx)(f.a,{type:"primary",onClick:function(){return n(e)},children:"\u53d1\u5e03"})}})})},"/publish-manage/published":function(){var e=Ve(2),t=e.dataSource,n=e.handleSunset;return Object(v.jsx)("div",{children:Object(v.jsx)(Ue,{dataSource:t,button:function(e){return Object(v.jsx)(f.a,{danger:!0,onClick:function(){return n(e)},children:"\u4e0b\u7ebf"})}})})},"/publish-manage/sunset":function(){var e=Ve(3),t=e.dataSource,n=e.handleDelete;return Object(v.jsx)("div",{children:Object(v.jsx)(Ue,{dataSource:t,button:function(e){return Object(v.jsx)(f.a,{danger:!0,onClick:function(){return n(e)},children:"\u5220\u9664"})}})})}};var Ze=Object(Y.b)((function(e){return{isLoading:e.LoadingReducer.isLoading}}))((function(e){var t=Object(a.useState)([]),n=Object(w.a)(t,2),c=n[0],i=n[1];Object(a.useEffect)((function(){Promise.all([g.a.get("/rights"),g.a.get("/children")]).then((function(e){i([].concat(Object(ee.a)(e[0].data),Object(ee.a)(e[1].data)))}))}),[]);var r=JSON.parse(localStorage.getItem("token")).role,s=r.rights,o=r.id;return Object(v.jsx)(te.a,{size:"large",spinning:e.isLoading,children:Object(v.jsxs)(j.d,{children:[c.map((function(e){return function(e){return Ge[e.key]&&(e.pagepermisson||e.routepermisson)}(e)&&function(e){return 1===o?s.checked.includes(e.key):s.includes(e.key)}(e)?Object(v.jsx)(j.b,{path:e.key,component:Ge[e.key],exact:!0},e.key):null})),Object(v.jsx)(j.a,{from:"/",to:"/home",exact:!0}),c.length>0&&Object(v.jsx)(j.b,{path:"*",component:oe})]})})})),Qe=J.a.Content;function $e(){return $.a.start(),Object(a.useEffect)((function(){$.a.done()}),[]),Object(v.jsxs)(J.a,{children:[Object(v.jsx)(A,{}),Object(v.jsxs)(J.a,{className:"site-layout",children:[Object(v.jsx)(Z,{}),Object(v.jsx)(Qe,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280},children:Object(v.jsx)(Ze,{})})]})]})}var et=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(v.jsx)(u.a,{children:Object(v.jsxs)(j.d,{children:[Object(v.jsx)(j.b,{path:"/login",component:y}),Object(v.jsx)(j.b,{path:"/news",component:q}),Object(v.jsx)(j.b,{path:"/detail/:id",component:T}),Object(v.jsx)(j.b,{path:"/",render:function(){return localStorage.getItem("token")?Object(v.jsx)($e,{}):Object(v.jsx)(j.a,{to:"/login"})}})]})})}}]),n}(a.Component),tt=(n(525),n(110)),nt=n(242),at=n(311),ct={key:"Tom",storage:n.n(at).a,blacklist:["LoadingReducer"]},it=Object(tt.a)({CollApsedReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isCollapsed:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case"change_collapsed":var a=Object(S.a)({},e);return a.isCollapsed=!a.isCollapsed,a;default:return e}},LoadingReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"change_loading":var c=Object(S.a)({},e);return c.isLoading=a,c;default:return e}}}),rt=Object(nt.a)(ct,it),st=Object(tt.b)(rt),ot=Object(nt.b)(st),lt=n(312);var dt=function(){return Object(v.jsx)(Y.a,{store:st,children:Object(v.jsx)(lt.a,{loading:null,persistor:ot,children:Object(v.jsx)(et,{})})})};g.a.defaults.baseURL="http://3.1.20.221/",g.a.interceptors.request.use((function(e){return st.dispatch({type:"change_loading",payload:!0}),e}),(function(e){return Promise.reject(e)})),g.a.interceptors.response.use((function(e){return st.dispatch({type:"change_loading",payload:!1}),e}),(function(e){return st.dispatch({type:"change_loading",payload:!1}),Promise.reject(e)})),r.a.render(Object(v.jsx)(dt,{}),document.getElementById("root"))}},[[528,1,2]]]);
//# sourceMappingURL=main.e60f823d.chunk.js.map